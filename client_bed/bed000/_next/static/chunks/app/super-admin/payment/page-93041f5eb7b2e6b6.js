(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9668],{7574:function(e,a,t){Promise.resolve().then(t.bind(t,1356))},6979:function(e,a,t){"use strict";t.d(a,{ZP:function(){return i}});var s=t(1434),r=t(1119),l=t(2265),n=t(9448);t(8242),t(4887),t(7935);var i=(0,l.forwardRef)(function(e,a){var t=(0,s.u)(e);return l.createElement(n.S,(0,r.Z)({ref:a},t))})},1356:function(e,a,t){"use strict";t.d(a,{default:function(){return P}});var s=t(7437),r=t(2265),l=t(386),n=t(2381),i=t(5974),o=t(9501),d=t(3590),c=t(1229),u=t(279),m=t(5060),p=t(4978),x=t(2786),h=t(6979),y=t(9093),g=t(662),f=t(7810),j=t(7520);let v=c.z.object({razorpay_payment_id:c.z.string().optional(),razorpay_order_id:c.z.string().optional(),razorpay_signature:c.z.string().optional(),amount:c.z.number().min(1,{message:"Amount must be positive"}),currency:c.z.enum(["INR","AUD"]).default("INR"),status:c.z.string().min(1,{message:"Status is required"}),method:c.z.string().optional(),email:c.z.string().email().optional().or(c.z.literal("")),contact:c.z.string().optional(),created_at:c.z.number().optional(),notes:c.z.any().optional(),paymentMode:c.z.enum(["online","offline"]).default("online"),manualMethod:c.z.enum(["cash","cheque","upi","bank_transfer"]).optional(),transactionReference:c.z.string().optional(),paymentDate:c.z.string().optional(),remarks:c.z.string().optional(),recordedBy:c.z.string().optional(),supporter:c.z.string().min(1,{message:"Supporter is required"}),bed:c.z.string().min(1,{message:"Bed is required"}),isVerified:c.z.boolean().default(!1)});var b=e=>{let{paymentId:a}=e,t=(0,l.I0)(),[i,c]=(0,r.useState)(),[b,N]=(0,r.useState)(),[w,_]=(0,r.useState)({value:"online",label:"Online"}),[z,I]=(0,r.useState)(),[M,D]=(0,r.useState)({value:"captured",label:"Captured"}),[S,k]=(0,r.useState)({value:"INR",label:"INR"}),[A,C]=(0,r.useState)({value:!1,label:"No"}),{handleSubmit:P,register:R,setValue:E,formState:{errors:F},setError:O,watch:V}=(0,o.cI)({resolver:(0,d.F)(v)}),[q,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a&&(async()=>{try{var e;let t=(await (0,x.bp)(a,"payment")).items;E("razorpay_payment_id",t.razorpay_payment_id||""),E("razorpay_order_id",t.razorpay_order_id||""),E("razorpay_signature",t.razorpay_signature||""),E("amount",t.amount),E("currency",t.currency||"INR"),E("status",t.status),E("method",t.method||""),E("email",t.email||""),E("contact",t.contact||""),E("created_at",t.created_at),E("notes",t.notes||{}),E("paymentMode",t.paymentMode||"online"),E("manualMethod",t.manualMethod||void 0),E("transactionReference",t.transactionReference||""),E("paymentDate",(null===(e=t.paymentDate)||void 0===e?void 0:e.split("T")[0])||""),E("remarks",t.remarks||""),E("supporter",t.supporter._id),E("bed",t.bed._id),E("isVerified",t.isVerified||!1),D({value:t.status,label:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),_({value:t.paymentMode||"online",label:"offline"===t.paymentMode?"Offline":"Online"}),k({value:t.currency||"INR",label:t.currency||"INR"}),t.manualMethod&&I({value:t.manualMethod,label:t.manualMethod.charAt(0).toUpperCase()+t.manualMethod.slice(1)}),C({value:t.isVerified||!1,label:t.isVerified?"Yes":"No"}),c({label:t.bed.bedNo,id:t.bed._id}),N({label:t.supporter.name,id:t.supporter._id})}catch(e){console.error("Error fetching payment details:",e)}})()},[a,E]);let T=async e=>{Z(!0);try{let t={...e,amount:Number(e.amount),...e.paymentDate&&{paymentDate:new Date(e.paymentDate).toISOString()}};if(a){let e=await (0,y.V)(t,"payment",a);e._id?p.Z.success("Payment updated successfully"):(O(e.id,{message:e.value}),p.Z.error("Error updating payment"))}else{let e=await (0,g.U)("payment",t);e._id?(p.Z.success("Payment created successfully"),U()):(O(e.id,{message:e.value}),p.Z.error("Error creating payment"))}}catch(e){console.error("Error submitting form:",e),p.Z.error("Error submitting form")}finally{Z(!1)}},U=()=>{E("amount",0),E("status","captured"),E("paymentMode","online"),E("supporter",""),E("bed",""),E("isVerified",!1),c(void 0),N(void 0),_({value:"online",label:"Online"}),D({value:"captured",label:"Captured"}),k({value:"INR",label:"INR"}),C({value:!1,label:"No"}),t((0,j.Oe)())},B=async e=>(await (0,x.GZ)(e)).items.map(e=>({id:e._id,label:e.bedNo})),W=async e=>(await (0,x.WX)(e)).items.map(e=>({id:e._id,label:e.name}));return(0,s.jsxs)("form",{onSubmit:P(T),className:"max-w-lg mx-auto p-4 bg-primary-foreground dark:bg-gray-900 shadow-lg rounded-lg grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-1 lg:col-span-2",children:[(0,s.jsx)(m._,{htmlFor:"amount",className:"required",children:"Amount (in paise)"}),(0,s.jsx)(u.I,{id:"amount",type:"number",...R("amount",{valueAsNumber:!0}),placeholder:"Enter amount",className:"w-full ".concat(F.amount?"border-red-500":"")}),F.amount&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.amount.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"currency",children:"Currency"}),(0,s.jsx)(h.ZP,{id:"currency",options:[{value:"INR",label:"INR"},{value:"AUD",label:"AUD"}],value:S,onChange:e=>{k(e),E("currency",e.value)},classNamePrefix:"select"}),F.currency&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.currency.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"status",className:"required",children:"Status"}),(0,s.jsx)(h.ZP,{id:"status",options:[{value:"captured",label:"Captured"},{value:"failed",label:"Failed"},{value:"pending",label:"Pending"}],value:M,onChange:e=>{D(e),E("status",e.value)},classNamePrefix:"select"}),F.status&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.status.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"paymentMode",className:"required",children:"Payment Mode"}),(0,s.jsx)(h.ZP,{id:"paymentMode",options:[{value:"online",label:"Online"},{value:"offline",label:"Offline"}],value:w,onChange:e=>{_(e),E("paymentMode",e.value),"online"===e.value&&(I(void 0),E("manualMethod",void 0))},classNamePrefix:"select"}),F.paymentMode&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.paymentMode.message})]}),"offline"===V("paymentMode")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"manualMethod",children:"Manual Method"}),(0,s.jsx)(h.ZP,{id:"manualMethod",options:[{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"upi",label:"UPI"},{value:"bank_transfer",label:"Bank Transfer"}],value:z,onChange:e=>{I(e),E("manualMethod",e.value)},classNamePrefix:"select"}),F.manualMethod&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.manualMethod.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"transactionReference",children:"Transaction Reference"}),(0,s.jsx)(u.I,{id:"transactionReference",...R("transactionReference"),placeholder:"Cheque no, UTR, etc.",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"paymentDate",children:"Payment Date"}),(0,s.jsx)(u.I,{type:"date",id:"paymentDate",...R("paymentDate"),className:"w-full"})]}),(0,s.jsxs)("div",{className:"col-span-1 lg:col-span-2",children:[(0,s.jsx)(m._,{htmlFor:"remarks",children:"Remarks"}),(0,s.jsx)(u.I,{id:"remarks",...R("remarks"),placeholder:"Enter remarks",className:"w-full"})]})]}),"online"===V("paymentMode")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"razorpay_payment_id",children:"Razorpay Payment ID"}),(0,s.jsx)(u.I,{id:"razorpay_payment_id",...R("razorpay_payment_id"),placeholder:"Enter Razorpay payment ID",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"razorpay_order_id",children:"Razorpay Order ID"}),(0,s.jsx)(u.I,{id:"razorpay_order_id",...R("razorpay_order_id"),placeholder:"Enter Razorpay order ID",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"razorpay_signature",children:"Razorpay Signature"}),(0,s.jsx)(u.I,{id:"razorpay_signature",...R("razorpay_signature"),placeholder:"Enter Razorpay signature",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"method",children:"Payment Method"}),(0,s.jsx)(u.I,{id:"method",...R("method"),placeholder:"e.g., UPI, Card, Netbanking",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"email",children:"Email"}),(0,s.jsx)(u.I,{id:"email",...R("email"),placeholder:"Enter payer email",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"contact",children:"Contact"}),(0,s.jsx)(u.I,{id:"contact",...R("contact"),placeholder:"Enter payer contact",className:"w-full"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"supporter",className:"required",children:"Supporter"}),(0,s.jsx)(f.Z,{cacheOptions:!0,loadOptions:W,defaultOptions:!0,value:b,onChange:e=>{N(e),E("supporter",null==e?void 0:e.id)},classNamePrefix:"select",required:!0,isClearable:!0}),F.supporter&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.supporter.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"bed",className:"required",children:"Bed"}),(0,s.jsx)(f.Z,{cacheOptions:!0,loadOptions:B,defaultOptions:!0,value:i,onChange:e=>{c(e),E("bed",null==e?void 0:e.id)},classNamePrefix:"select",required:!0,isClearable:!0}),F.bed&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:F.bed.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{children:"Verified"}),(0,s.jsx)(h.ZP,{options:[{value:!0,label:"Yes"},{value:!1,label:"No"}],value:A,onChange:e=>{C(e),E("isVerified",e.value)},classNamePrefix:"select"})]}),(0,s.jsxs)("div",{className:"flex justify-between col-span-1 lg:col-span-2",children:[(0,s.jsx)(n.z,{onClick:U,className:"bg-slate-400 hover:bg-slate-500",children:a?"Cancel":"Clear"}),(0,s.jsx)(n.z,{className:q?"cursor-not-allowed opacity-50":"",type:"submit",children:a?"Update":"Create"})]})]})},N=t(8438),w=t(3618),_=t(4291),z=t(9376);let I=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{year:"numeric",month:"short",day:"numeric"};if(!e)return"N/A";try{let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid Date";return new Intl.DateTimeFormat("en-US",a).format(t)}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}},M=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR";if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],null==e)return"N/A";let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"Invalid Amount";try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}catch(e){return console.error("Error formatting currency:",e),"".concat(a," ").concat(t.toFixed(2))}},D=[{accessorKey:"supporter.name",header:"Supporter"},{accessorKey:"bed.bedNo",header:"Bed No"},{accessorKey:"amount",header:"Amount",cell:e=>{let{row:a}=e;return M(a.getValue("amount"))}},{accessorKey:"status",header:"Status",cell:e=>{let{row:a}=e,t=a.getValue("status");return(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("captured"===t?"bg-green-100 text-green-800":"failed"===t?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:t.charAt(0).toUpperCase()+t.slice(1)})}},{accessorKey:"paymentMode",header:"Mode",cell:e=>{let{row:a}=e,t=a.getValue("paymentMode");return(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("online"===t?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:t.charAt(0).toUpperCase()+t.slice(1)})}},{accessorKey:"viewDetails",header:"Actions",cell:e=>{let a=e.row.original;return(0,s.jsxs)(_.Vq,{children:[(0,s.jsx)(_.hg,{className:"underline",children:(0,s.jsx)("button",{className:"px-4 p-1 text-white bg-sidebar-primary rounded-full",children:"View"})}),(0,s.jsx)(_.cZ,{className:"p-6 max-w-md",children:(0,s.jsx)(S,{data:a})})]})}}],S=e=>{let{data:a}=e,t=(0,l.I0)(),r=(0,z.useRouter)();return(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Payment Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Supporter"}),(0,s.jsx)("p",{children:a.supporter.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Bed No"}),(0,s.jsx)("p",{children:a.bed.bedNo})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Amount"}),(0,s.jsx)("p",{children:M(a.amount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,s.jsx)("p",{className:"capitalize",children:a.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Mode"}),(0,s.jsx)("p",{className:"capitalize",children:a.paymentMode})]}),a.paymentDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Date"}),(0,s.jsx)("p",{children:I(a.paymentDate)})]}),"online"===a.paymentMode&&a.razorpay_payment_id&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Razorpay ID"}),(0,s.jsx)("p",{className:"text-xs font-mono",children:a.razorpay_payment_id})]}),"offline"===a.paymentMode&&a.transactionReference&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Reference"}),(0,s.jsx)("p",{children:a.transactionReference})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,s.jsx)(n.z,{className:"text-sm",onClick:()=>{t((0,j.R5)("payment")),t((0,j.h9)(a._id))},children:"Edit Payment"}),(0,s.jsx)(n.z,{variant:"outline",className:"text-sm",onClick:()=>r.push("/supporters/".concat(a.supporter._id)),children:"View Supporter"})]})]})};var k=t(4395),A=t(7162);function C(){var e;let a;let[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(0),[d,c]=(0,r.useState)(0),[u,m]=(0,r.useState)(10),[p,x]=(0,r.useState)(""),[h,y]=(0,r.useState)(),[g,j]=(0,r.useState)(null),[v,b]=(0,r.useState)(""),[_,z]=(0,r.useState)(""),[I,M]=(0,r.useState)(()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),2).toISOString().split("T")[0]}),[S,C]=(0,r.useState)(()=>new Date().toISOString().split("T")[0]),[P,R]=(0,r.useState)(null),E=(0,l.v9)(e=>e.update.refresh),F=(0,l.v9)(e=>e.payment.id),O=(0,l.v9)(A.oM),V=e=>{let{country:a}=e;return(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-800",children:[a.country," ",(0,s.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",a.currency,")"]})]}),(0,s.jsxs)("span",{className:"bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded",children:[a.totalPayments," total"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,s.jsx)(q,{label:"Active",value:a.activePayments}),(0,s.jsx)(q,{label:"Month",value:a.thisMonthPayments}),(0,s.jsx)(q,{label:"Week",value:a.thisWeekPayments}),(0,s.jsx)(q,{label:"Today",value:a.thisDayPayments})]}),(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 grid grid-cols-2 gap-1 text-xs",children:[(0,s.jsx)(q,{label:"Total",value:"".concat(a.currency," ").concat(a.totalAmount)}),(0,s.jsx)(q,{label:"Month",value:"".concat(a.currency," ").concat(a.thisMonthAmount)}),(0,s.jsx)(q,{label:"Week",value:"".concat(a.currency," ").concat(a.thisWeekAmount)}),(0,s.jsx)(q,{label:"Today",value:"".concat(a.currency," ").concat(a.thisDayAmount)})]})]})},q=e=>{let{label:a,value:t}=e;return(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:[a,":"]}),(0,s.jsx)("span",{className:"font-medium ml-1",children:t})]})},Z=(0,r.useCallback)(async()=>{try{let e=await w.YD.get("payment/payment-head");console.log("Payment Head Data:",e);let a=e.data,t=0,s=0,r=0,l=0,n=0,i=0,o=0;a.data.forEach(e=>{t+=e.totalpayments,s+=e.activepayments,r+=e.thisMonthpayments,l+=e.thisWeekpayments,n+=e.totalAmount,i+=e.thisMonthAmount,o+=e.thisWeekAmount}),R({...a,totalPayments:t,activePayments:s,thisMonthPayments:r})}catch(e){console.error("Error fetching payment head data:",e)}},[]);(0,r.useCallback)((e=e=>{z(e),c(0)},function(){for(var t=arguments.length,s=Array(t),r=0;r<t;r++)s[r]=arguments[r];clearTimeout(a),a=setTimeout(()=>{e(...s)},500)}),[]);let T=async e=>{if(y(e),c(0),e&&e.id)try{let a=await w.YD.get("/bed/".concat(e.id));j(a.data.data)}catch(e){console.error("Error fetching bed data:",e),j(null)}else j(null)};async function U(){try{let e="";if(F){let e=await w.YD.get("/payment/".concat(F)),a=[];return a[0]=e.data.data,o(1),a}"Active"===v?e="isActive__eq=true&":"InActive"===v&&(e="isActive__eq=false&");let a=_&&!h?"search=".concat(_,"&"):"",t="";h&&h.id&&(t="bed__eq=".concat(h.id,"&")),h&&h.id;let s=h&&h.id?"":"skip=".concat(d*u,"&"),r={filters:{...!h&&{startDate:I?new Date(I).toISOString():void 0,endDate:S?new Date(S).toISOString():void 0}}},l=await w.YD.post("/payment/get?limit=Infinity&".concat(s).concat(t).concat(e).concat(a,"sortBy=paymentDate"),r,{headers:{"Content-Type":"application/json"}});console.log("Payment Data:",l.data);let n=l.data.data;return o(n.total||n.length),n.items||n}catch(e){return console.error("Error fetching data:",e),[]}}let B=t.reduce((e,a)=>e+(a.amount||0),0);return(0,r.useEffect)(()=>{(async function(){let e=await U();n(Array.isArray(e)?e:[])})(),Z()},[d,u,_,v,E,F,h,I,S]),(0,s.jsx)("div",{className:"flex flex-col items-center p-4",children:(0,s.jsxs)("div",{className:"container mx-auto py-10",children:[!h&&P&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold mb-3 text-gray-800 flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Payment Overview"]}),(0,s.jsx)("div",{className:"space-y-3",children:P.data.map(e=>(0,s.jsxs)("details",{className:"group",children:[(0,s.jsxs)("summary",{className:"flex justify-between items-center p-2 cursor-pointer bg-gray-50 rounded-lg hover:bg-gray-100",children:[(0,s.jsxs)("h3",{className:"text-md font-medium text-gray-700",children:[e.organizationName," Summary"]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-500 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 p-2",children:e.data.map((e,a)=>(0,s.jsx)(V,{country:e},a))})]},e.organizationId))})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-4 gap-2 flex-wrap",children:[!h&&(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"w-full md:w-auto",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:I,onChange:e=>{M(e.target.value),c(0)},className:"p-2 border border-gray-300 rounded w-full",max:S})]}),(0,s.jsxs)("div",{className:"w-full md:w-auto",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:S,onChange:e=>{C(e.target.value),c(0)},className:"p-2 border border-gray-300 rounded w-full",min:I})]})]}),(0,s.jsx)("div",{className:"w-full md:flex-1 min-w-[200px]",children:(0,s.jsx)(f.Z,{cacheOptions:!0,loadOptions:k.$y,defaultOptions:!0,value:h,onChange:T,className:"w-full",classNamePrefix:"select",required:!0,isClearable:!0,placeholder:"Select Bed"})}),(0,s.jsx)("div",{className:"w-full md:w-auto",children:(0,s.jsxs)("select",{value:v,onChange:e=>{b(e.target.value),c(0)},className:"p-2 border border-gray-300 rounded w-full md:w-[150px]",disabled:!!h,children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"InActive",children:"InActive"})]})})]}),g&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border border-gray-200",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:["Bed ",h.label]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-sm",children:"Total Donations"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:[g.country.currency," ",null==g?void 0:g.fixedAmount]})]}),(0,s.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-sm",children:"Target Amount"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:[g.country.currency," ",g.amount]})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-100",children:[(0,s.jsxs)("h3",{className:"font-medium text-gray-600 text-sm",children:["Contributors (",t.length,")"]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:[g.country.currency," ",B]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-sm",children:"Amount Needed"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[g.country.currency," ",g.amount-B]})]})]})]}),(0,s.jsx)(N.w,{url:"payment",columns:D,data:t,totalRows:i,pageIndex:d,pageSize:u,onPageChange:c,onPageSizeChange:m,actions:{delete:"superAdmin"===O,edit:"superAdmin"===O}})]})})}function P(){let[e,a]=(0,r.useState)(!0),t=(0,l.I0)(),o=(0,l.v9)(e=>e.update.url),d=(0,l.v9)(e=>e.update.id);return(0,s.jsxs)("div",{className:"p-2 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold mb-2 text-bg2 flex justify-start",children:"Payments"}),"payment"===o?"":(0,s.jsx)(n.z,{onClick:()=>{t((0,i.Ib)()),t((0,j.Oe)()),a(!e)},className:"py-2 px-4 rounded-md hover:bg-bg2",children:e?"Add Payment":"View Payments"})]}),"payment"===o?d&&(0,s.jsx)(b,{paymentId:d}):e?(0,s.jsx)(C,{}):(0,s.jsx)(b,{})]})}},4291:function(e,a,t){"use strict";t.d(a,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cZ:function(){return m},fK:function(){return p},hg:function(){return d}});var s=t(7437),r=t(2265),l=t(9027),n=t(653),i=t(3448);let o=l.fC,d=l.xz,c=l.h_;l.x8;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=l.aV.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[r,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.Pxu,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});x.displayName=l.Dx.displayName;let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});h.displayName=l.dk.displayName},7162:function(e,a,t){"use strict";t.d(a,{Jt:function(){return o},gD:function(){return r},oM:function(){return i},tR:function(){return l}});let s=(0,t(1455).oM)({name:"auth",initialState:{role:"",isAuth:!1,accessToken:""},reducers:{setRole:(e,a)=>{e.role=a.payload},setIsAuth:(e,a)=>{e.isAuth=a.payload},setAccessToken:(e,a)=>{e.accessToken=a.payload}}}),{setRole:r,setIsAuth:l,setAccessToken:n}=s.actions,i=e=>e.auth.role,o=e=>e.auth.isAuth;a.ZP=s.reducer},5974:function(e,a,t){"use strict";t.d(a,{Ib:function(){return l}});let s=(0,t(1455).oM)({name:"payment",initialState:{id:null,paymentId:null},reducers:{setPaymentId:(e,a)=>{e.paymentId=a.payload},clearPaymentId:e=>{e.paymentId=null}}}),{setPaymentId:r,clearPaymentId:l}=s.actions;a.ZP=s.reducer}},function(e){e.O(0,[8310,3464,1229,9518,7261,1140,5720,6827,9027,2519,3402,4285,2329,1316,2971,2117,1744],function(){return e(e.s=7574)}),_N_E=e.O()}]);