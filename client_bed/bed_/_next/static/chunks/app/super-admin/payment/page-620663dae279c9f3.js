(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9668],{8611:function(e,t,a){Promise.resolve().then(a.bind(a,2086))},3327:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5252:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},525:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2086:function(e,t,a){"use strict";a.d(t,{default:function(){return D}});var s=a(7437),r=a(2265),n=a(8438),l=a(3618),d=a(386),i=a(4291),c=a(2381),o=a(9376),m=a(7520),x=a(3455),u=a(5420);let p=[{accessorKey:"supporter.name",header:"Name"},{accessorKey:"phNo",header:"Phone No",cell:e=>{let{row:t}=e;t.original}},{accessorKey:"paymentDate",header:"Date",cell:e=>{var t,a;let{row:s}=e;return new Date((null==s?void 0:null===(t=s.original)||void 0===t?void 0:t.paymentDate)||(null==s?void 0:null===(a=s.original)||void 0===a?void 0:a.createdAt)).toLocaleDateString()}},{accessorKey:"amount",header:"Amount",cell:e=>{let{row:t}=e,a=t.original.currency||"AUD";return"".concat(a," ").concat(t.getValue("amount"))}},{accessorKey:"supporter.bed.bedNo",header:"Bed"},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,a=t.getValue("status");return(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("completed"===a?"bg-green-100 text-green-800":"failed"===a?"bg-red-100 text-red-800":"pending"===a?"bg-yellow-100 text-yellow-800":"cancelled"===a?"bg-gray-100 text-gray-800":"refunded"===a||"partially_refunded"===a?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:a.charAt(0).toUpperCase()+a.slice(1).replace("_"," ")})}},{accessorKey:"paymentMode",header:"Mode",cell:e=>{let{row:t}=e,a=t.getValue("paymentMode");return(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("online"===a?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:(null==a?void 0:a.charAt(0).toUpperCase())+(null==a?void 0:a.slice(1))||"Online"})}},{accessorKey:"viewDetails",header:"Actions",cell:e=>{let t=e.row.original;return(0,s.jsxs)(i.Vq,{children:[(0,s.jsx)(i.hg,{className:"underline",children:(0,s.jsx)("button",{className:"px-4 p-1 text-white bg-sidebar-primary rounded-full",children:"View"})}),(0,s.jsx)(i.cZ,{className:"p-6 max-w-4xl max-h-[80vh] overflow-y-auto",children:(0,s.jsx)(h,{data:t})})]})}}],h=e=>{var t,a,r,n,l,i,p;let{data:h}=e,g=(0,d.I0)();return(0,o.useRouter)(),(0,s.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold border-b pb-2",children:"Payment Details"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Receipt Number"}),(0,s.jsx)("p",{className:"font-mono",children:h.receiptNumber||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Amount"}),(0,s.jsxs)("p",{className:"font-semibold text-lg",children:[h.currency||"AUD"," ",(0,u.x)(h.amount)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,s.jsx)("p",{className:"capitalize font-medium",children:h.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Mode"}),(0,s.jsx)("p",{className:"capitalize",children:h.paymentMode||"online"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Date"}),(0,s.jsx)("p",{children:(0,x.Sp)(h.paymentDate||h.createdAt)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Source"}),(0,s.jsx)("p",{className:"capitalize",children:h.source||"website"})]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Payer Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Name"}),(0,s.jsx)("p",{children:h.name||((null===(t=h.payer)||void 0===t?void 0:t.name)?"".concat(h.payer.name.given_name||""," ").concat(h.payer.name.surname||"").trim():"N/A")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,s.jsx)("p",{children:h.email||(null===(a=h.payer)||void 0===a?void 0:a.email_address)||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,s.jsx)("p",{children:h.phNo||(null===(l=h.payer)||void 0===l?void 0:null===(n=l.phone)||void 0===n?void 0:null===(r=n.phone_number)||void 0===r?void 0:r.national_number)||"N/A"})]}),(null===(i=h.payer)||void 0===i?void 0:i.address)&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Address"}),(0,s.jsx)("p",{children:[h.payer.address.address_line_1,h.payer.address.admin_area_2,h.payer.address.admin_area_1,h.payer.address.postal_code,h.payer.address.country_code].filter(Boolean).join(", ")||h.address||"N/A"})]})]})]}),"online"===h.paymentMode&&(0,s.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"PayPal Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.paypal_order_id&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"PayPal Order ID"}),(0,s.jsx)("p",{className:"text-xs font-mono break-all",children:h.paypal_order_id})]}),h.paypal_payment_id&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"PayPal Payment ID"}),(0,s.jsx)("p",{className:"text-xs font-mono break-all",children:h.paypal_payment_id})]}),h.paypal_capture_id&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"PayPal Capture ID"}),(0,s.jsx)("p",{className:"text-xs font-mono break-all",children:h.paypal_capture_id})]}),h.paypal_status&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"PayPal Status"}),(0,s.jsx)("p",{className:"uppercase",children:h.paypal_status})]}),h.paypal_fee&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"PayPal Fee"}),(0,s.jsxs)("p",{children:[h.paypal_fee.currency," ",h.paypal_fee.amount||0]})]}),h.net_amount&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Net Amount"}),(0,s.jsxs)("p",{className:"font-medium",children:[h.currency," ",(0,u.x)(h.net_amount)]})]})]})]}),"offline"===h.paymentMode&&(0,s.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Manual Payment Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.manualMethod&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Payment Method"}),(0,s.jsx)("p",{className:"capitalize",children:h.manualMethod})]}),h.transactionReference&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Transaction Reference"}),(0,s.jsx)("p",{children:h.transactionReference})]}),h.remarks&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Remarks"}),(0,s.jsx)("p",{children:h.remarks})]}),h.recordedBy&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Recorded By"}),(0,s.jsx)("p",{children:h.recordedBy.name||h.recordedBy.email||"N/A"})]})]})]}),h.contribution&&(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Contribution Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Purpose"}),(0,s.jsx)("p",{className:"capitalize",children:(null===(p=h.contribution.purpose)||void 0===p?void 0:p.replace("_"," "))||"General Donation"})]}),h.contribution.description&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Description"}),(0,s.jsx)("p",{children:h.contribution.description})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Approval Status"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Approved"}),(0,s.jsx)("p",{className:h.isApproved?"text-green-600 font-medium":"text-red-600 font-medium",children:h.isApproved?"Yes":"No"})]}),h.approvedBy&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Approved By"}),(0,s.jsx)("p",{children:h.approvedBy.name||h.approvedBy.email||"N/A"})]}),h.approvedAt&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Approved At"}),(0,s.jsx)("p",{children:(0,x.Sp)(h.approvedAt)})]})]})]}),h.error_details&&(h.error_details.error_code||h.error_details.error_message)&&(0,s.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3 text-red-800",children:"Error Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[h.error_details.error_code&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Error Code"}),(0,s.jsx)("p",{className:"font-mono text-red-600",children:h.error_details.error_code})]}),h.error_details.error_message&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Error Message"}),(0,s.jsx)("p",{className:"text-red-600",children:h.error_details.error_message})]}),h.error_details.debug_id&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Debug ID"}),(0,s.jsx)("p",{className:"font-mono text-xs",children:h.error_details.debug_id})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"Additional Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.createdAt&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Created At"}),(0,s.jsx)("p",{children:(0,x.Sp)(h.createdAt)})]}),h.updatedAt&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Updated At"}),(0,s.jsx)("p",{children:(0,x.Sp)(h.updatedAt)})]}),h.ip_address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"IP Address"}),(0,s.jsx)("p",{className:"font-mono text-xs",children:h.ip_address})]}),h.user_agent&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"User Agent"}),(0,s.jsx)("p",{className:"text-xs break-all",children:h.user_agent})]})]})]})]}),(0,s.jsx)("div",{className:"flex gap-2 pt-4 border-t",children:(0,s.jsx)(c.z,{className:"text-sm",onClick:()=>{g((0,m.R5)("generous-payments")),g((0,m.h9)(h._id))},children:"Edit Payment"})})]})};var g=a(5805),y=a(525),j=a(1723),f=a(1047),N=a(3327),v=a(5252),b=e=>{let{onStatsLoad:t}=e,[a,n]=(0,r.useState)(null),[d,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null),m=async()=>{try{i(!0);let e=await l.YD.get("/bed-payments/stats"),a=e.data.data;console.log(e),n(a),null==t||t(a)}catch(e){o("Failed to load payment statistics"),console.error("Error fetching payment stats:",e)}finally{i(!1)}};(0,r.useEffect)(()=>{m()},[]);let x=e=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),u=e=>{let{title:t,amount:a,count:r,icon:n,gradient:l,textColor:d="text-white",subtitle:i=""}=e;return(0,s.jsxs)("div",{className:"".concat(l," rounded-xl p-6 shadow-lg transform hover:scale-105 transition-all duration-300 relative overflow-hidden"),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-20 h-20 rounded-full bg-white/10"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 -mb-6 -ml-6 w-16 h-16 rounded-full bg-white/5"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg bg-white/20 backdrop-blur-sm",children:(0,s.jsx)(n,{className:"w-6 h-6 ".concat(d)})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm ".concat(d,"/80 font-medium"),children:t}),i&&(0,s.jsx)("p",{className:"text-xs ".concat(d,"/60"),children:i})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-3xl font-bold ".concat(d),children:x(a)}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 ".concat(d,"/70")}),(0,s.jsxs)("p",{className:"text-sm ".concat(d,"/80"),children:[r," payment",1!==r?"s":""]})]})]})]})]})};return d?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>(0,s.jsx)("div",{className:"bg-gray-200 animate-pulse rounded-xl h-40"},e))}):c?(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-8",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-red-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Error Loading Statistics"}),(0,s.jsx)("p",{className:"text-red-600",children:c})]})]})}):a?(0,s.jsxs)("div",{className:"mb-8 space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Statistics"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Overview of completed payments"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(u,{title:"Today",amount:a.today.amount,count:a.today.count,icon:j.Z,gradient:"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700",subtitle:new Date().toLocaleDateString("en-AU",{weekday:"long",month:"short",day:"numeric"})}),(0,s.jsx)(u,{title:"This Week",amount:a.week.amount,count:a.week.count,icon:f.Z,gradient:"bg-gradient-to-br from-green-500 via-green-600 to-green-700",subtitle:"Last 7 days"}),(0,s.jsx)(u,{title:"This Month",amount:a.month.amount,count:a.month.count,icon:y.Z,gradient:"bg-gradient-to-br from-purple-500 via-purple-600 to-purple-700",subtitle:new Date().toLocaleDateString("en-AU",{month:"long",year:"numeric"})}),(0,s.jsx)(u,{title:"All Time",amount:a.total.amount,count:a.total.count,icon:N.Z,gradient:"bg-gradient-to-br from-orange-500 via-orange-600 to-orange-700",subtitle:"Avg: ".concat(x(a.total.avgAmount))})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,s.jsx)(v.Z,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Summary"}),(0,s.jsxs)("p",{className:"text-gray-600",children:[a.total.count," total completed payments"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Average Payment Amount"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:x(a.total.avgAmount)})]})]})})]}):null},w=a(7162);function _(){var e;let t;let[a,i]=(0,r.useState)([]),[c,o]=(0,r.useState)(0),[m,x]=(0,r.useState)(0),[u,h]=(0,r.useState)(10),[g,y]=(0,r.useState)(""),[j,f]=(0,r.useState)("all"),[N,v]=(0,r.useState)("all"),[_,A]=(0,r.useState)(()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),2).toISOString().split("T")[0]}),D=(0,d.v9)(w.oM),[k,S]=(0,r.useState)(()=>new Date().toISOString().split("T")[0]),[P,I]=(0,r.useState)(""),M=(0,d.v9)(e=>e.update.refresh),Z=(0,d.v9)(e=>e.payment.id),C=(0,r.useCallback)((e=e=>{I(e),x(0)},function(){for(var a=arguments.length,s=Array(a),r=0;r<a;r++)s[r]=arguments[r];clearTimeout(t),t=setTimeout(()=>{e(...s)},500)}),[]);async function E(){try{if(Z){let e=await l.YD.get("/bed-payments/".concat(Z,"&sort=-paymentDate")),t=[];return t[0]=e.data.data,o(1),t}let e="";"all"!==j&&(e="status__eq=".concat(j,"&"));let t="";"all"!==N&&(t="paymentMode__eq=".concat(N,"&"));let a="limit=".concat(u,"&"),s="skip=".concat(m*u,"&"),r={filters:{startDate:_?new Date(_).toISOString():void 0,endDate:k?new Date(k).toISOString():void 0}},n=await l.YD.post("/bed-payments?".concat(a).concat(s).concat(e).concat(t).concat(P?"search=".concat(P,"&"):"","sort=-paymentDate"),r,{headers:{"Content-Type":"application/json"}});console.log(n);let d=n.data.data;return o(d.total||d.length),d.items||d}catch(e){return console.error("Error fetching payment data:",e),[]}}return(0,r.useEffect)(()=>{(async function(){let e=await E();e&&i(e)})()},[m,u,P,j,N,_,k,M,Z]),(0,s.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,s.jsx)(b,{}),(0,s.jsxs)("div",{className:"container mx-auto py-10",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between gap-4"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-1",children:"Search"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>{let t=e.target.value;y(t),C(t)},placeholder:"Search by name, phone number...",className:"p-2 border rounded flex-grow max-w-md"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-1",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:_,onChange:e=>{A(e.target.value),x(0)},className:"p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-1",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:k,onChange:e=>{S(e.target.value),x(0)},className:"p-2 border border-gray-300 rounded"})]})]})]}),(0,s.jsx)(n.w,{url:"bed-payments",columns:p,data:a,totalRows:c,pageIndex:m,pageSize:u,onPageChange:x,onPageSizeChange:h,actions:{delete:"superAdmin"===D,edit:"superAdmin"===D}})]})]})}var A=a(5974);function D(){let[e,t]=(0,r.useState)(!0),a=(0,d.I0)(),n=(0,d.v9)(e=>e.update.url),l=(0,d.v9)(e=>e.update.id);return(0,s.jsxs)("div",{className:"p-2 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold mb-2 text-bg2 flex justify-start",children:"Payments"}),"payment"===n?"":(0,s.jsx)(c.z,{onClick:()=>{a((0,A.Ib)()),a((0,m.Oe)()),t(!e)},className:"py-2 px-4 rounded-md hover:bg-bg2",children:e?"Add Payment":"View Payments"})]}),"payment"===n?l&&(0,s.jsx)("div",{}):e?(0,s.jsx)(_,{}):(0,s.jsx)("div",{})]})}},4291:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return h},Vq:function(){return i},cZ:function(){return x},fK:function(){return u},hg:function(){return c}});var s=a(7437),r=a(2265),n=a(9027),l=a(653),d=a(3448);let i=n.fC,c=n.xz,o=n.h_;n.x8;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=n.aV.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(n.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Pxu,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=n.VY.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=n.Dx.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});h.displayName=n.dk.displayName},7162:function(e,t,a){"use strict";a.d(t,{Jt:function(){return i},gD:function(){return r},oM:function(){return d},tR:function(){return n}});let s=(0,a(1455).oM)({name:"auth",initialState:{role:"",isAuth:!1,accessToken:""},reducers:{setRole:(e,t)=>{e.role=t.payload},setIsAuth:(e,t)=>{e.isAuth=t.payload},setAccessToken:(e,t)=>{e.accessToken=t.payload}}}),{setRole:r,setIsAuth:n,setAccessToken:l}=s.actions,d=e=>e.auth.role,i=e=>e.auth.isAuth;t.ZP=s.reducer},5974:function(e,t,a){"use strict";a.d(t,{Ib:function(){return n}});let s=(0,a(1455).oM)({name:"payment",initialState:{id:null,paymentId:null},reducers:{setPaymentId:(e,t)=>{e.paymentId=t.payload},clearPaymentId:e=>{e.paymentId=null}}}),{setPaymentId:r,clearPaymentId:n}=s.actions;t.ZP=s.reducer},5420:function(e,t,a){"use strict";a.d(t,{x:function(){return s}});let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INR";if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],null==e)return"N/A";let a="string"==typeof e?parseFloat(e):e;if(isNaN(a))return"Invalid Amount";try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(e){return console.error("Error formatting currency:",e),"".concat(t," ").concat(a.toFixed(2))}}},3455:function(e,t,a){"use strict";a.d(t,{Sp:function(){return s}});let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{year:"numeric",month:"short",day:"numeric"};if(!e)return"N/A";try{let a="string"==typeof e?new Date(e):e;if(isNaN(a.getTime()))return"Invalid Date";return new Intl.DateTimeFormat("en-US",t).format(a)}catch(e){return console.error("Error formatting date:",e),"Invalid Date"}}}},function(e){e.O(0,[8310,3464,969,6827,9027,3402,8575,1455,1145,8438,2971,2117,1744],function(){return e(e.s=8611)}),_N_E=e.O()}]);