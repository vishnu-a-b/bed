(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4582],{5187:function(e,t,a){Promise.resolve().then(a.bind(a,2197))},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:a,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",c),...u},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{className:i,...c}=a;return(0,r.createElement)(l,{ref:o,iconNode:t,className:n("lucide-".concat(s(e)),i),...c})});return a.displayName="".concat(e),a}},7920:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2197:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(7437),s=a(2265),n=a(3464),o=a(3618),l=a(8997),i=a(7920),c=a(5252),d=a(5805),m=a(8090),u=a(4773),x=a(9205);let p=(0,x.Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),y=(0,x.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var h=a(2489);function g(e){let{supporterId:t,supporterData:a}=e,o="https://api.donatebed.shanthibhavan.in/v1",[i,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)("idle"),[g,f]=(0,s.useState)("");(0,s.useEffect)(()=>()=>{let e=document.querySelector('script[src="https://checkout.razorpay.com/v1/checkout.js"]');e&&document.body.removeChild(e)},[]);let b=async()=>{var e,a,r,s,l,i;if(!t){f("Supporter ID is missing"),x("error");return}m(!1),c(!0),x("processing"),f("");try{console.log("=== CREATE ORDER REQUEST ==="),console.log("API URL:","".concat(o,"/bed-payments-ind/create-order")),console.log("Supporter ID:",t);let a=await n.Z.post("".concat(o,"/bed-payments-ind/create-order"),{supporterId:t});console.log("Full API response:",a);let r=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data;if(!r.orderId||!r.amount)throw Error("Invalid API response. Received: ".concat(JSON.stringify(r)));let s=document.createElement("script");s.src="https://checkout.razorpay.com/v1/checkout.js",s.async=!0,s.onload=()=>{let e={key:"rzp_live_RGb8eb4GQxS75R",amount:r.amount,currency:r.currency||"INR",order_id:r.orderId,name:"Generous Contributions",description:"Bed Payment Contribution",image:"/logo.png",prefill:{name:"",email:"",contact:""},method:{upi:!0,card:!0,netbanking:!0,wallet:!0},theme:{color:"#3B82F6"},handler:async function(e){try{var t;x("processing");let a=await n.Z.post("".concat(o,"/bed-payments-ind/verify"),{razorpay_payment_id:e.razorpay_payment_id,razorpay_order_id:e.razorpay_order_id,razorpay_signature:e.razorpay_signature});if(console.log("Verification response:",a),null===(t=a.data)||void 0===t?void 0:t.success)x("success"),setTimeout(()=>{window.location.reload()},2e3);else throw Error("Payment verification failed")}catch(e){console.error("Verification error:",e),x("error"),f("Payment completed but verification failed. Please contact support.")}},modal:{ondismiss:function(){c(!1),x("idle"),f("Payment cancelled")}}},t=new window.Razorpay(e);t.on("payment.failed",function(e){console.error("Payment failed:",e.error),x("error"),f(e.error.description||e.error.reason||"Payment failed. Please try again."),c(!1)}),t.open()},s.onerror=()=>{x("error"),f("Failed to load payment gateway. Please try again."),c(!1)},document.body.appendChild(s)}catch(t){console.error("=== PAYMENT ERROR ==="),console.error("Full error:",t),console.error("Error response:",null==t?void 0:t.response),console.error("Error response data:",null==t?void 0:null===(a=t.response)||void 0===a?void 0:a.data),x("error");let e=(null==t?void 0:null===(s=t.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.error)||(null==t?void 0:null===(i=t.response)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:l.message)||(t instanceof Error?t.message:"Payment failed");console.error("Showing error message:",e),f(e)}finally{c(!1)}};return"success"===u?(0,r.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"text-center py-8 bg-green-50 rounded-lg",children:[(0,r.jsx)(p,{className:"mx-auto h-12 w-12 text-green-500 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Successful!"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Thank you for your contribution to palliative care."})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"pt-6 border-t border-gray-200",children:[g&&(0,r.jsx)("div",{className:"text-red-500 text-sm text-center p-3 bg-red-50 rounded-lg mb-4",children:g}),(0,r.jsx)("button",{type:"button",onClick:()=>m(!0),disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"w-5 h-5 mr-2"}),"Pay Now"]})})]}),d&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Confirm Payment"}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(h.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Supporter Name"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:(null==a?void 0:a.supporterName)||"N/A"})]}),(null==a?void 0:a.bedNo)&&a.bedNo<1e3&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Bed Number"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:a.bedNo})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Monthly Amount"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:[null==a?void 0:a.currency," ",(null==a?void 0:a.fixedAmount)||"N/A"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Payment Method"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Razorpay (UPI, Card, Net Banking)"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"You will be able to choose your preferred payment method in the next step."})]}),(0,r.jsxs)("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:b,disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Proceed to Payment"})]})]})})]})}function f(){var e;let t=new URLSearchParams(window.location.search).get("supporter");console.log("Supporter ID:",t);let[a,x]=(0,s.useState)(null),[p,y]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null);return((0,s.useEffect)(()=>{t&&(async()=>{try{var e,a;let r=await o.YD.get("/supporter/".concat(t)),s=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.data;console.log("Supporter details:",s);let l=(null==s?void 0:null===(a=s.bed)||void 0===a?void 0:a.organization)==="685a6b023c2c9217eb9d074e",i=l?"bed-payments":"bed-payments-ind";console.log("Fetching from ".concat(i," "));let c=await (0,n.Z)("".concat("https://api.donatebed.shanthibhavan.in/v1","/").concat(i,"/get-supporter-data/").concat(t));console.log("Payment data (".concat(l?"Australia":"India","):"),c),x(null==c?void 0:c.data)}catch(e){f(e instanceof Error?e.message:"Unknown error")}finally{y(!1)}})()},[t]),p)?(0,r.jsx)("div",{children:"Loading"}):h?(0,r.jsxs)("div",{children:["Error: ",h]}):a?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-8 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[(0,r.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4 leading-tight",children:["Supporter ",(0,r.jsx)("span",{className:"text-blue-600",children:"Profile"})]}),(0,r.jsx)("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto mb-6",children:"Viewing contributions and details"}),(null==a?void 0:a.bedNo)<1e3&&(0,r.jsxs)("div",{className:"flex justify-center items-center gap-3",children:[(0,r.jsxs)("span",{className:"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium flex items-center gap-1",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"})," ",null==a?void 0:a.totalPayments," ","Payments"]}),(0,r.jsxs)("span",{className:"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"})," Bed ",null==a?void 0:a.bedNo]})]})]}),(null==a?void 0:a.bedNo)<1e3&&(0,r.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,r.jsx)(b,{title:"Total Contributions",value:"".concat(null==a?void 0:a.currency," ").concat(a.totalAmount.toLocaleString()),icon:(0,r.jsx)(c.Z,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-50"}),(0,r.jsx)(b,{title:"Online Payments",value:a.totalOnlinePayments,icon:(0,r.jsx)(c.Z,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-50"}),(0,r.jsx)(b,{title:"Offline Payments",value:a.totalOfflinePayments,icon:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-green-600"}),color:"bg-green-50"}),(0,r.jsx)(b,{title:"Payment Methods",value:(null===(e=a.paymentMethods)||void 0===e?void 0:e.length)||"Multiple",icon:(0,r.jsx)(l.Z,{className:"w-6 h-6 text-red-600"}),color:"bg-red-50"})]}),(0,r.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white rounded-xl shadow-sm overflow-hidden mb-8 border border-gray-100",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Payment History",(0,r.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",a.payments.length," records)"]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)(j,{children:"Amount"}),(0,r.jsx)(j,{children:"Mode"}),(0,r.jsx)(j,{children:"Status"}),(0,r.jsx)(j,{children:"Date"}),(0,r.jsx)(j,{children:"Reference"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.payments.map((e,t)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)(v,{className:"font-medium text-green-600",children:[null==a?void 0:a.currency," ",e.amount.toLocaleString()]}),(0,r.jsx)(v,{children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("online"===e.paymentMode?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.paymentMode.charAt(0).toUpperCase()+e.paymentMode.slice(1)})}),(0,r.jsx)(v,{children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("captured"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsx)(v,{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsx)(v,{className:"text-sm text-gray-500 font-mono",children:e.reference||"N/A"})]},t))})]})}),0===a.payments.length&&(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-gray-300"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No payment records yet"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Add the first payment for this supporter"})]})]}),(0,r.jsx)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"flex flex-col sm:flex-row justify-center gap-4 mb-8",children:"Australia"===a.countryName?(0,r.jsx)(u.Z,{id:t,supporterData:a}):(0,r.jsx)(g,{supporterId:t,supporterData:a})}),(0,r.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-blue-50 rounded-xl p-6 border border-blue-100",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-blue-800 mb-4",children:"Supporter Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Basic Information"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(N,{label:"Name",value:a.supporterName}),(null==a?void 0:a.bedNo)<1e3&&(0,r.jsx)(N,{label:"Bed Number",value:a.bedNo}),(0,r.jsx)(N,{label:"Country",value:a.countryName}),(0,r.jsx)(N,{label:"Monthily Support Amount",value:a.currency+" "+a.fixedAmount})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Payment Summary"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(N,{label:"Total Contributions",value:"".concat(a.currency," ").concat(a.totalAmount.toLocaleString())}),(0,r.jsx)(N,{label:"First Payment",value:a.payments.length>0?new Date(a.payments[a.payments.length-1].date).toLocaleDateString():"N/A"}),(0,r.jsx)(N,{label:"Last Payment",value:a.payments.length>0?new Date(a.payments[0].date).toLocaleDateString():"N/A"}),(0,r.jsx)(N,{label:"Average Payment",value:a.payments.length>0?"".concat(a.currency," ").concat(Math.round(a.totalAmount/a.payments.length).toLocaleString()):"N/A"})]})]})]})]})]})}):(0,r.jsx)("div",{children:"Supporter not found"})}function b(e){let{title:t,value:a,icon:s,color:n="bg-blue-50"}=e;return(0,r.jsx)("div",{className:"".concat(n," p-6 rounded-xl shadow-sm border border-gray-100 transition-all hover:shadow-md"),children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-white shadow-sm mr-4",children:s}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:t}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a})]})]})})}function j(e){let{children:t}=e;return(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t})}function v(e){let{children:t,className:a=""}=e;return(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm ".concat(a),children:t})}function N(e){let{label:t,value:a}=e;return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:t}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a})]})}},4773:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),s=a(3464),n=a(8997),o=a(2489),l=a(2265);function i(e){let{id:t,supporterData:a}=e,[i,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1),p="https://api.donatebed.shanthibhavan.in/v1";(0,l.useEffect)(()=>{{let e=new URLSearchParams(window.location.search),t=e.get("PayerID"),a=e.get("paymentId");t&&a&&h(t,a)}},[]);let y=async()=>{x(!1),c(!0),m(null);try{let e=(await s.Z.post("".concat(p,"/bed-payments/create"),{supporter:t,source:"website"},{headers:{"Content-Type":"application/json"}})).data;if(e.success){let{approvalUrl:t,orderId:a,paymentId:r}=e.data;if(window.sessionStorage&&sessionStorage.setItem("paymentInfo",JSON.stringify({orderId:a,paymentId:r})),t)window.location.href=t;else throw Error("No approval URL received from PayPal")}else throw Error(e.message||"Payment creation failed")}catch(e){console.error("Payment creation error:",e),m("error")}finally{c(!1)}},h=async(e,t)=>{try{let e=window.sessionStorage?sessionStorage.getItem("paymentInfo"):null,a=e?JSON.parse(e):{},r=(await s.Z.post("".concat(p,"/bed-payments/verify"),{paypal_order_id:a.orderId,paypal_payment_id:t},{headers:{"Content-Type":"application/json"}})).data;if(r.success)m("success"),window.sessionStorage&&sessionStorage.removeItem("paymentInfo");else throw Error(r.message||"Payment verification failed")}catch(e){console.error("Payment verification error:",e),m("error")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,r.jsx)("button",{type:"button",onClick:()=>x(!0),disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Payment..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{className:"w-5 h-5 mr-2"}),"Pay Now"]})})}),u&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Confirm Payment"}),(0,r.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(o.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Supporter Name"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:(null==a?void 0:a.supporterName)||"N/A"})]}),(null==a?void 0:a.bedNo)&&a.bedNo<1e3&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Bed Number"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:a.bedNo})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Monthly Amount"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:[null==a?void 0:a.currency," ",(null==a?void 0:a.fixedAmount)||"N/A"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Payment Method"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"PayPal"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"You will be redirected to PayPal to complete your payment securely."})]}),(0,r.jsxs)("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:y,disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):"Proceed to PayPal"})]})]})})]})}},3618:function(e,t,a){"use strict";a.d(t,{YD:function(){return d},hP:function(){return i},kS:function(){return c},pH:function(){return n}});var r=a(3464);let s="https://api.donatebed.shanthibhavan.in/v1",n=async(e,t)=>{let a=await r.Z.post("".concat(s,"/auth/jwt/create"),{username:e,password:t});return l(a.data.data.accessToken,a.data.data.refreshToken),a.data.data},o=async e=>(await r.Z.post("".concat(s,"/auth/jwt/verify"),{refreshToken:e})).data.data,l=(e,t)=>{sessionStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},i=()=>sessionStorage.getItem("access_token"),c=()=>{sessionStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()},d=r.Z.create({baseURL:s,headers:{"Content-Type":"multipart/form-data"}});d.interceptors.request.use(e=>{let t=i();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),d.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry){a._retry=!0;let e=localStorage.getItem("refresh_token");if(e)try{let{accessToken:t}=await o(e);return l(t,e),a.headers.Authorization="Bearer "+t,d(a)}catch(e){throw c(),window.location.reload(),e}else c(),window.location.reload()}throw e})}},function(e){e.O(0,[3464,8653,2971,2117,1744],function(){return e(e.s=5187)}),_N_E=e.O()}]);