(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{12:function(e,a,t){Promise.resolve().then(t.bind(t,5811))},6979:function(e,a,t){"use strict";t.d(a,{ZP:function(){return o}});var s=t(1434),r=t(1119),l=t(2265),n=t(9448);t(8242),t(4887),t(7935);var o=(0,l.forwardRef)(function(e,a){var t=(0,s.u)(e);return l.createElement(n.S,(0,r.Z)({ref:a},t))})},5811:function(e,a,t){"use strict";t.d(a,{default:function(){return C}});var s=t(7437),r=t(2265),l=t(8438),n=t(3618),o=t(386),i=t(4291),d=t(2381),c=t(9376),u=t(4978);let m=[{accessorKey:"name",header:"Name"},{accessorKey:"user.mobileNo",header:"Phone No"},{accessorKey:"bed.bedNo",header:"Bed"},{accessorKey:"bed.organization.name",header:"Organization"},{accessorKey:"data",header:"Date",cell:e=>{let{row:a}=e;return new Date(a.original.createdAt).toLocaleDateString()}},{accessorKey:"amount",header:"Amount",cell:e=>{var a,t;let{row:s}=e,r=s.original.amount;return"".concat(null===(t=s.original.bed)||void 0===t?void 0:null===(a=t.country)||void 0===a?void 0:a.currency," ").concat(r)}},{accessorKey:"viewDetails",header:"View Details",cell:e=>{let a=e.row.original;return(0,s.jsxs)(i.Vq,{children:[(0,s.jsx)(i.hg,{className:" underline",children:(0,s.jsx)("button",{className:"px-4 p-1 text-white bg-sidebar-primary rounded-full",children:"View"})}),(0,s.jsx)(i.cZ,{className:"p-6",children:(0,s.jsx)(p,{data:a})})]})}},{accessorKey:"link",header:"Link",cell:e=>{var a;let{row:t}=e,r=null===(a=t.original.bed)||void 0===a?void 0:a.organization,l=t.original._id,n=(null==r?void 0:r.vcLink)&&l?"".concat(r.vcLink.replace(/\/$/,""),"/supporter?supporter=").concat(l):"",o=async()=>{if(!n){u.Z.error("Link not available.");return}try{await navigator.clipboard.writeText(n),u.Z.success("Link copied to clipboard!")}catch(e){u.Z.error("Failed to copy link.")}};return(0,s.jsx)("div",{className:"flex flex-col gap-1 max-w-[180px]",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:o,children:"Copy"})})})}}],p=e=>{var a,t;let{data:r}=e;return console.log(r),(0,o.I0)(),(0,c.useRouter)(),(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:r.name}),"Phone No : ",null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.mobileNo,(0,s.jsx)("br",{}),"Email : ",null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.email]})}),(0,s.jsx)("div",{className:"flex gap-2"})]})};var x=t(7810),h=t(4395),v=t(7162),g=t(5060);function b(){var e,a,t,i;let d;let[c,u]=(0,r.useState)([]),[p,b]=(0,r.useState)(0),[f,j]=(0,r.useState)(0),[N,y]=(0,r.useState)(10),[w,S]=(0,r.useState)(""),[D,k]=(0,r.useState)(),[A,I]=(0,r.useState)(null),[z,M]=(0,r.useState)(""),[_,O]=(0,r.useState)(""),[C,E]=(0,r.useState)(),[V,B]=(0,r.useState)(()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),2).toISOString().split("T")[0]}),[P,Z]=(0,r.useState)(()=>new Date().toISOString().split("T")[0]),[F,T]=(0,r.useState)(null),L=(0,o.v9)(e=>e.update.refresh),W=(0,o.v9)(e=>e.supporter.id),q=(0,o.v9)(v.oM),U=e=>{let{title:a,value:t,color:r,icon:l}=e,n={blue:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-100"},green:{bg:"bg-green-50",text:"text-green-600",border:"border-green-100"},purple:{bg:"bg-purple-50",text:"text-purple-600",border:"border-purple-100"},yellow:{bg:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-100"}},o={users:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"}),"user-check":(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}),calendar:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}),clock:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})};return(0,s.jsxs)("div",{className:"".concat(n[r].bg," p-3 rounded-lg border ").concat(n[r].border," flex items-start"),children:[(0,s.jsx)("div",{className:"mr-2 mt-0.5",children:(0,s.jsx)("svg",{className:"w-5 h-5 ".concat(n[r].text),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o[l]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-xs",children:a}),(0,s.jsx)("p",{className:"text-xl font-bold ".concat(n[r].text),children:t})]})]})},R=e=>{let{country:a}=e;return(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("h4",{className:"font-medium text-gray-800",children:[a.country," ",(0,s.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",a.currency,")"]})]}),(0,s.jsxs)("span",{className:"bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded",children:[a.totalSupporters," total"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,s.jsx)(Y,{label:"Active",value:a.activeSupporters}),(0,s.jsx)(Y,{label:"Month",value:a.thisMonthSupporters}),(0,s.jsx)(Y,{label:"Week",value:a.thisWeekSupporters}),(0,s.jsx)(Y,{label:"Today",value:a.thisDaySupporters})]}),(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 grid grid-cols-2 gap-1 text-xs",children:[(0,s.jsx)(Y,{label:"Total",value:"".concat(a.currency," ").concat(a.totalAmount)}),(0,s.jsx)(Y,{label:"Month",value:"".concat(a.currency," ").concat(a.thisMonthAmount)}),(0,s.jsx)(Y,{label:"Week",value:"".concat(a.currency," ").concat(a.thisWeekAmount)}),(0,s.jsx)(Y,{label:"Today",value:"".concat(a.currency," ").concat(a.thisDayAmount)})]})]})},Y=e=>{let{label:a,value:t}=e;return(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:[a,":"]}),(0,s.jsx)("span",{className:"font-medium ml-1",children:t})]})},K=(0,r.useCallback)(async()=>{try{let e=await n.YD.get("supporter/supporter-head");console.log("Supporter Head Data:",e.data);let a=e.data,t=0,s=0,r=0,l=0,o=0,i=0,d=0;a.data.forEach(e=>{t+=e.totalSupporters,s+=e.activeSupporters,r+=e.thisMonthSupporters,l+=e.thisWeekSupporters,o+=e.totalAmount,i+=e.thisMonthAmount,d+=e.thisWeekAmount,e.data.forEach(e=>{})}),T({...a,totalSupporters:t,activeSupporters:s,thisMonthSupporters:r})}catch(e){console.error("Error fetching supporter head data:",e)}},[]);(0,r.useCallback)((i=e=>{O(e),j(0)},function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];clearTimeout(d),d=setTimeout(()=>{i(...a)},500)}),[]);let H=async e=>{if(k(e),j(0),e&&e.id)try{let a=await n.YD.get("/bed/".concat(e.id));I(a.data.data)}catch(e){console.error("Error fetching bed data:",e),I(null)}else I(null)};async function $(){try{let e="";if(W){let e=await n.YD.get("/supporter/".concat(W)),a=[];return a[0]=e.data.data,b(1),a}"Active"===z?e="isActive__eq=true&":"InActive"===z&&(e="isActive__eq=false&");let a=_&&!D?"search=".concat(_,"&"):"",t="";D&&D.id&&(t="bed__eq=".concat(D.id,"&")),D&&D.id;let s=D&&D.id?"":"skip=".concat(f*N,"&"),r={filters:{...!D&&{startDate:V?new Date(V).toISOString():void 0,endDate:P?new Date(P).toISOString():void 0}}},l=await n.YD.post("/supporter/get?limit=Infinity&".concat(s).concat(t).concat(e).concat(a,"sortBy=createdAt"),r,{headers:{"Content-Type":"application/json"}}),o=l.data.data.items||l.data.data;return C&&C.value&&(o=o.filter(e=>e.bed&&e.bed.country&&e.bed.country._id===C.value)),b(o.total||o.length),o.items||o}catch(e){return console.error("Error fetching data:",e),[]}}let G=c.reduce((e,a)=>e+(a.amount||0),0);return(0,r.useEffect)(()=>{(async function(){let e=await $();u(Array.isArray(e)?e:[])})(),K()},[f,N,_,z,L,W,D,V,P,C]),(0,s.jsx)("div",{className:"flex flex-col items-center p-4",children:(0,s.jsxs)("div",{className:"container mx-auto py-10",children:[!D&&F&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold mb-3 text-gray-800 flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Supporter Overview"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[(0,s.jsx)(U,{title:"Total Supporters",value:null!==(e=F.totalSupporters)&&void 0!==e?e:0,color:"blue",icon:"users"}),(0,s.jsx)(U,{title:"Active Supporters",value:null!==(a=F.activeSupporters)&&void 0!==a?a:0,color:"green",icon:"user-check"}),(0,s.jsx)(U,{title:"New This Month",value:null!==(t=F.thisMonthSupporters)&&void 0!==t?t:0,color:"purple",icon:"calendar"}),(0,s.jsx)(U,{title:"New This Week",value:F.data.reduce((e,a)=>e+a.thisWeekSupporters,0),color:"yellow",icon:"clock"})]}),(0,s.jsx)("div",{className:"space-y-3",children:F.data.map(e=>(0,s.jsxs)("details",{className:"group",children:[(0,s.jsxs)("summary",{className:"flex justify-between items-center p-2 cursor-pointer bg-gray-50 rounded-lg hover:bg-gray-100",children:[(0,s.jsxs)("h3",{className:"text-md font-medium text-gray-700",children:[e.organizationName," Summary"]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-500 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 p-2",children:e.data.map((e,a)=>(0,s.jsx)(R,{country:e},a))})]},e.organizationId))})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-4 gap-2 flex-wrap",children:[!D&&(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"w-full md:w-auto",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:V,onChange:e=>{B(e.target.value),j(0)},className:"p-2 border border-gray-300 rounded w-full",max:P})]}),(0,s.jsxs)("div",{className:"w-full md:w-auto",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:P,onChange:e=>{Z(e.target.value),j(0)},className:"p-2 border border-gray-300 rounded w-full",min:V})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"country",children:"Country"}),(0,s.jsx)(x.Z,{cacheOptions:!0,loadOptions:h.Pb,defaultOptions:!0,value:C,onChange:e=>{e?E({value:e.id,label:e.label}):E(null)},classNamePrefix:"select",isClearable:!0})]}),(0,s.jsxs)("div",{className:"w-full md:flex-1 min-w-[200px]",children:[(0,s.jsx)(g._,{htmlFor:"bed",children:"Bed"}),(0,s.jsx)(x.Z,{cacheOptions:!0,loadOptions:h.$y,defaultOptions:!0,value:D,onChange:H,className:"w-full",classNamePrefix:"select",required:!0,isClearable:!0,placeholder:"Select Bed"})]}),(0,s.jsx)("div",{className:"w-full md:w-auto",children:(0,s.jsxs)("select",{value:z,onChange:e=>{M(e.target.value),j(0)},className:"p-2 border border-gray-300 rounded w-full md:w-[150px]",disabled:!!D,children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"InActive",children:"InActive"})]})})]}),A&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6 border border-gray-200",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:["Bed ",D.label]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-sm",children:"Total Donations"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:[A.country.currency," ",null==A?void 0:A.fixedAmount]})]}),(0,s.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-sm",children:"Target Amount"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:[A.country.currency," ",A.amount]})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-100",children:[(0,s.jsxs)("h3",{className:"font-medium text-gray-600 text-sm",children:["Contributors (",c.length,")"]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:[A.country.currency," ",G]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-600 text-sm",children:"Amount Needed"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[A.country.currency," ",A.amount-G]})]})]})]}),(0,s.jsx)(l.w,{url:"supporter",columns:m,data:c,totalRows:p,pageIndex:f,pageSize:N,onPageChange:j,onPageSizeChange:y,actions:{delete:"superAdmin"===q,edit:"superAdmin"===q}})]})})}var f=t(2884),j=t(9501),N=t(3590),y=t(1229),w=t(279),S=t(2786),D=t(6979),k=t(9093),A=t(662),I=t(3965),z=t(7520),M=t(6528);let _=y.z.object({name:y.z.string().min(1,{message:"Name is required"}).max(100),mobileNo:y.z.string().min(1,{message:"Mobile number is required"}).max(20),password:y.z.string().optional(),email:y.z.string().optional().refine(e=>!e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),{message:"Invalid email format"}),address:y.z.string().optional(),role:y.z.string().optional(),userId:y.z.string().optional(),dateOfBirth:y.z.string().optional(),type:y.z.string().default("Individual"),startDate:y.z.string().optional(),endDate:y.z.string().optional(),amount:y.z.number().optional(),gender:y.z.enum(["Male","Female","Other"],{message:"Gender is required"}).optional(),maritalStatus:y.z.enum(["Unknown","Bachelor","Married","Divorced","Widower"],{message:"Invalid marital status"}).optional(),bed:y.z.string().optional(),isActive:y.z.boolean().default(!0),nameVisible:y.z.boolean().optional(),panNo:y.z.string().optional()});var O=e=>{let{supporterId:a}=e,t=(0,o.I0)(),[l,n]=(0,r.useState)(),[i,c]=(0,r.useState)({value:"Male",label:"Male"}),[m,p]=(0,r.useState)({value:"Unknown",label:"Unknown"}),[v,b]=(0,r.useState)({value:"Individual",label:"Individual"}),[f,y]=(0,r.useState)({value:!0,label:"Active"}),[O,C]=(0,r.useState)([]),{handleSubmit:E,register:V,setValue:B,formState:{errors:P},setError:Z,watch:F}=(0,j.cI)({resolver:(0,N.F)(_)}),[T,L]=(0,r.useState)(!1),W="supporter";(0,r.useEffect)(()=>{(async()=>{try{let e=(await (0,S.fp)()).items.map(e=>({value:e._id,label:e.title,slug:e.slug})).find(e=>e.slug===W);e&&C([e])}catch(e){console.error("Error fetching roles:",e)}})()},[W]),(0,r.useEffect)(()=>{a&&(async()=>{try{var e,t,s,r,l,o,i,d,u,m,x,h,v,g,f,j;let N=await (0,S.bp)(a,"supporter");console.log(N);let w=N.items;if(console.log(null===(e=w.user)||void 0===e?void 0:e.isActive),B("name",w.name),B("address",w.address||""),B("mobileNo",null===(t=w.user)||void 0===t?void 0:t.mobileNo),B("email",null===(s=w.user)||void 0===s?void 0:s.email),B("amount",w.amount),B("type",w.type),B("panNo",w.panNo||""),B("nameVisible",void 0===w.nameVisible||w.nameVisible),b({value:w.type,label:w.type}),null===(r=w.user)||void 0===r?void 0:r.dateOfBirth){let e=new Date(w.user.dateOfBirth).toISOString().split("T")[0];B("dateOfBirth",e)}if(null===(l=w.user)||void 0===l?void 0:l.startDate){let e=new Date(w.user.startDate).toISOString().split("T")[0];B("startDate",e)}if(null===(o=w.user)||void 0===o?void 0:o.endDate){let e=new Date(w.user.endDate).toISOString().split("T")[0];B("endDate",e)}c({value:null===(i=w.user)||void 0===i?void 0:i.gender,label:null===(d=w.user)||void 0===d?void 0:d.gender}),y({value:null===(u=w.user)||void 0===u?void 0:u.isActive,label:(null===(m=w.user)||void 0===m?void 0:m.isActive)?"Active":"Inactive"}),p({value:null===(x=w.user)||void 0===x?void 0:x.maritalStatus,label:null===(h=w.user)||void 0===h?void 0:h.maritalStatus}),n({label:null==w?void 0:null===(v=w.bed)||void 0===v?void 0:v.bedNo,id:null==w?void 0:null===(g=w.bed)||void 0===g?void 0:g._id}),B("userId",null===(f=w.user)||void 0===f?void 0:f._id),B("role",null===(j=w.user)||void 0===j?void 0:j.role),B("isActive",w.isActive)}catch(e){console.error("Error fetching supporter details:",e)}})()},[a,B]);let q=async(e,t)=>{console.log(O),L(!0),null==t||t.preventDefault();try{let t="User@"+e.mobileNo,s={...e.name&&{name:e.name},...e.mobileNo&&{mobileNo:e.mobileNo},...e.email&&{email:e.email},...e.dateOfBirth&&{dateOfBirth:e.dateOfBirth},...i&&{gender:i.value},...m&&{maritalStatus:m.value},isActive:e.isActive,...a?{}:{password:t}},r=new FormData;if(Object.entries(s).forEach(e=>{let[a,t]=e;Array.isArray(t)?t.forEach(e=>r.append(a,e)):"string"==typeof t||t instanceof Blob?r.append(a,t):console.warn('Skipping key "'.concat(a,'" with unsupported value type.'))}),O.forEach((e,a)=>r.append("roles[".concat(a,"]"),"6821c34384fe6b2ba4e1cd14")),console.log(s),a){let t=await (0,k.V)(r,"user",e.userId||""),s={...e.name&&{name:e.name},...l.id&&{bed:l.id},...e.userId&&{user:e.userId},...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.amount&&{amount:e.amount},...e.address&&{address:e.address},...v.value&&{type:v.value},...void 0!==e.nameVisible&&{nameVisible:e.nameVisible},...e.panNo&&{panNo:e.panNo},isActive:e.isActive,role:"regular-supporter"},n=await (0,k.V)(s,"supporter",a);n._id?t._id?u.Z.success("supporter updated successfully"):(Z(t.id,{message:t.value}),u.Z.error("Error updating supporter")):(Z(n.id,{message:n.value}),u.Z.error("Error updating supporter"))}else{let a=await (0,A.U)("user",r,!0);if(a._id){let t={...e.name&&{name:e.name},...l.id&&{bed:l.id},...e.startDate&&{startDate:e.startDate},...e.endDate&&{endDate:e.endDate},...e.amount&&{amount:e.amount},...e.supporterRole&&{role:e.supporterRole},...v.value&&{type:v.value},...e.address&&{address:e.address},...void 0!==e.nameVisible&&{nameVisible:e.nameVisible},...e.panNo&&{panNo:e.panNo},isActive:e.isActive,user:a._id,role:"regular-supporter"},s=await (0,A.U)("supporter",t);s._id?(u.Z.success("Supporter created successfully"),U()):((0,M.S)("/user",a._id),Z(s.id,{message:a.value}),u.Z.error("Error creating supporter"))}else Z(a.id,{message:a.value}),u.Z.error("Error creating user")}}catch(e){console.error("Error submitting form:",e),u.Z.error("Error submitting form")}finally{L(!1)}},U=()=>{B("name",""),B("mobileNo",""),B("email",""),B("dateOfBirth",void 0),B("startDate",void 0),B("endDate",void 0),t((0,z.Oe)())};return(0,s.jsxs)("form",{onSubmit:E(q),className:"max-w-lg mx-auto  p-4 bg-primary-foreground dark:bg-gray-900 shadow-lg rounded-lg grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-1 lg:col-span-2",children:[(0,s.jsx)(g._,{htmlFor:"name",className:"required",children:"Name"}),(0,s.jsx)(w.I,{id:"name",...V("name"),placeholder:"Enter name",className:"w-full ".concat(P.name?"border-red-500":"")}),P.name&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"mobileNo",className:"required",children:"Mobile Number"}),(0,s.jsx)(w.I,{id:"mobileNo",...V("mobileNo"),placeholder:"Enter mobile number",className:"w-full ".concat(P.mobileNo?"border-red-500":"")}),P.mobileNo&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.mobileNo.message})]}),(0,s.jsxs)("div",{className:"hidden",children:[(0,s.jsx)(g._,{htmlFor:"password",className:"required",children:"Password"}),(0,s.jsx)(w.I,{id:"password",...V("password"),placeholder:"Enter password",type:"text",className:"w-full ".concat(P.password?"border-red-500":"")}),P.password&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.password.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"email",children:"Email"}),(0,s.jsx)(w.I,{id:"email",...V("email"),placeholder:"Enter email",className:"w-full"}),P.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.email.message})]}),(0,s.jsxs)("div",{className:"col-span-1 lg:col-span-2",children:[(0,s.jsx)(g._,{htmlFor:"address",className:"required",children:"Address"}),(0,s.jsx)(w.I,{id:"address",...V("address"),placeholder:"Enter address",className:"w-full ".concat(P.address?"border-red-500":"")}),P.address&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.address.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,s.jsx)(w.I,{type:"date",id:"dateOfBirth",...V("dateOfBirth",{valueAsDate:!1})}),P.dateOfBirth&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.dateOfBirth.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(w.I,{type:"date",id:"startDate",...V("startDate",{valueAsDate:!1})}),P.startDate&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.startDate.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"endDate",children:"End Date"}),(0,s.jsx)(w.I,{type:"date",id:"endDate",...V("endDate",{valueAsDate:!1})}),P.endDate&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.endDate.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"amount",children:"Amount"}),(0,s.jsx)(w.I,{type:"number",id:"amount",...V("amount",{valueAsNumber:!0}),placeholder:"Enter amount",className:"w-full ".concat(P.amount?"border-red-500":"")}),P.amount&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.amount.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{children:"Gender"}),(0,s.jsx)(D.ZP,{id:"gender",name:"gender",value:i,options:I.P,classNamePrefix:"select",onChange:e=>{B("gender",e.value),c(e)}}),P.gender&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.gender.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"maritalStatus",children:"Marital Status"}),(0,s.jsx)(D.ZP,{id:"maritalStatus",name:"maritalStatus",options:[{value:"Unknown",label:"Unknown"},{value:"Bachelor",label:"Bachelor"},{value:"Married",label:"Married"},{value:"Divorced",label:"Divorced"},{value:"Widower",label:"Widower"}],classNamePrefix:"select",value:m,onChange:e=>{B("maritalStatus",e.value),p(e)}}),P.maritalStatus&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.maritalStatus.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"bed",className:"required",children:"bed"}),(0,s.jsx)(x.Z,{cacheOptions:!0,loadOptions:h.$y,defaultOptions:!0,value:l,onChange:e=>{n(e)},classNamePrefix:"select",required:!0,isClearable:!0}),P.bed&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.bed.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"panNo",children:"PAN Number"}),(0,s.jsx)(w.I,{id:"panNo",...V("panNo"),placeholder:"Enter PAN number",className:"w-full"}),P.panNo&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.panNo.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"nameVisible",children:"Display Name Publicly"}),(0,s.jsx)(D.ZP,{id:"nameVisible",options:[{value:!0,label:"Yes"},{value:!1,label:"No"}],value:void 0!==F("nameVisible")?{value:F("nameVisible"),label:F("nameVisible")?"Yes":"No"}:void 0,onChange:e=>B("nameVisible",null==e?void 0:e.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{htmlFor:"type",children:"Type"}),(0,s.jsx)(D.ZP,{id:"type",name:"type",options:[{value:"Individual",label:"Individual"},{value:"Organization",label:"Organization"}],classNamePrefix:"select",defaultValue:{value:"Individual",label:"Individual"},onChange:e=>{B("type",null==e?void 0:e.value),b(e)}}),P.type&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:P.type.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{children:"Status"}),(0,s.jsx)(D.ZP,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f,onChange:e=>{y(e),B("isActive",e.value)}})]}),(0,s.jsxs)("div",{className:"flex justify-between col-span-1 lg:col-span-2",children:[(0,s.jsx)(d.z,{onClick:U,className:" bg-slate-400 hover:bg-slate-500",children:a?"Cancel":"Clear"}),(0,s.jsx)(d.z,{className:T?"cursor-not-allowed opacity-50":"",type:"submit",children:a?"Update":"Create"})]})]})};function C(){let[e,a]=(0,r.useState)(!0),t=(0,o.I0)(),l=(0,o.v9)(e=>e.update.url),n=(0,o.v9)(e=>e.update.id);return(0,s.jsxs)("div",{className:"p-2 sm:p-4",children:[(0,s.jsxs)("div",{className:" flex justify-between",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold mb-2 text-bg2 flex justify-start",children:"Supporters"}),"supporter"===l?"":(0,s.jsx)(d.z,{onClick:()=>{t((0,f.MG)()),t((0,z.Oe)()),a(!e)},className:" py-2 px-4 rounded-md hover:bg-bg2",children:e?"Add Supporters":"View Supporter"})]}),"supporter"===l?n&&(0,s.jsx)(O,{supporterId:n}):e?(0,s.jsx)(b,{}):(0,s.jsx)(O,{})]})}},4291:function(e,a,t){"use strict";t.d(a,{$N:function(){return x},Be:function(){return h},Vq:function(){return i},cZ:function(){return m},fK:function(){return p},hg:function(){return d}});var s=t(7437),r=t(2265),l=t(9027),n=t(653),o=t(3448);let i=l.fC,d=l.xz,c=l.h_;l.x8;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.aV,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=l.aV.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.VY,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[r,(0,s.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.Pxu,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});x.displayName=l.Dx.displayName;let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});h.displayName=l.dk.displayName},3965:function(e,a,t){"use strict";t.d(a,{P:function(){return s}});let s=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}]},7162:function(e,a,t){"use strict";t.d(a,{Jt:function(){return i},gD:function(){return r},oM:function(){return o},tR:function(){return l}});let s=(0,t(1455).oM)({name:"auth",initialState:{role:"",isAuth:!1,accessToken:""},reducers:{setRole:(e,a)=>{e.role=a.payload},setIsAuth:(e,a)=>{e.isAuth=a.payload},setAccessToken:(e,a)=>{e.accessToken=a.payload}}}),{setRole:r,setIsAuth:l,setAccessToken:n}=s.actions,o=e=>e.auth.role,i=e=>e.auth.isAuth;a.ZP=s.reducer},2884:function(e,a,t){"use strict";t.d(a,{MG:function(){return l}});let s=(0,t(1455).oM)({name:"supporter",initialState:{id:null,name:null,userId:null,userName:null},reducers:{setSupporterId:(e,a)=>{e.id=a.payload},clearSupporterId:e=>{e.id=null},setSupporterUserName:(e,a)=>{e.userName=a.payload},setSupporterUserId:(e,a)=>{e.userId=a.payload},clearSupporterUser:e=>{e.userId=null,e.userName=null},setSupporterName:(e,a)=>{e.name=a.payload},clearSupporterName:e=>{e.name=null}}}),{setSupporterId:r,clearSupporterId:l,setSupporterUserName:n,setSupporterUserId:o,clearSupporterUser:i,setSupporterName:d,clearSupporterName:c}=s.actions;a.ZP=s.reducer},6528:function(e,a,t){"use strict";t.d(a,{S:function(){return r}});var s=t(3618);let r=async(e,a)=>{try{let t=await s.YD.delete("".concat(e,"/").concat(a));return console.log(t),t}catch(e){console.error("Error deleting data:",e)}}}}]);