(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3790],{7167:function(e,r,t){Promise.resolve().then(t.bind(t,229))},9322:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5252:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},8997:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3774:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2369:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},229:function(e,r,t){"use strict";t.d(r,{default:function(){return y}});var s=t(7437),a=t(2265),n=t(8997),o=t(401),l=t(9322),i=t(5252),c=t(2369);let d=(0,t(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var u=t(3774),m=t(1229),p=t(3464),x=t(6576),h=t.n(x);t(4074);let f=m.z.object({name:m.z.string().min(1,"Name is required").trim(),email:m.z.string().email("Invalid email address"),phone:m.z.string().min(1,"Phone number is required"),address:m.z.string().optional()}),g=m.z.object({amount:m.z.string().refine(e=>{let r=parseFloat(e);return!isNaN(r)&&r>0},"Please enter a valid amount greater than 0"),currency:m.z.string().default("AUD"),contributor:f,source:m.z.string().default("website")});var y=()=>{let e="https://api.donatebed.shanthibhavan.in/v1",[r,t]=(0,a.useState)({amount:"",currency:"AUD",contributor:{name:"",phone:"",email:"",address:""},source:"website"}),[x,f]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[j,N]=(0,a.useState)({}),v=()=>{try{return g.parse(r),N({}),!0}catch(e){if(e instanceof m.z.ZodError){let r={};e.errors.forEach(e=>{let t=e.path.join(".");t.startsWith("contributor.")?r[t.replace("contributor.","")]=e.message:r[t]=e.message}),N(r)}return!1}},w=(e,r,s)=>{e&&"amount"!==e&&"currency"!==e&&"source"!==e?t(t=>({...t,[e]:{...t[e],[r]:s}})):t(e=>({...e,[r]:s})),j[r]&&N(e=>{let t={...e};return delete t[r],t})},k=async()=>{if(v()){f(!0),b(null);try{let t=(await p.Z.post("".concat(e,"/generous-payments/create"),{...r,amount:parseFloat(r.amount)},{headers:{"Content-Type":"application/json"}})).data;if(t.success){let{approvalUrl:e,orderId:s,paymentId:a}=t.data;if(window.sessionStorage&&sessionStorage.setItem("paymentInfo",JSON.stringify({orderId:s,paymentId:a,amount:r.amount,currency:r.currency})),e)window.location.href=e;else throw Error("No approval URL received from PayPal")}else throw Error(t.message||"Payment creation failed")}catch(e){console.error("Payment creation error:",e),b("error")}finally{f(!1)}}},Z=async(r,s)=>{try{let r=window.sessionStorage?sessionStorage.getItem("paymentInfo"):null,a=r?JSON.parse(r):{},n=(await p.Z.post("".concat(e,"/generous-payments/verify"),{paypal_order_id:a.orderId,paypal_payment_id:s},{headers:{"Content-Type":"application/json"}})).data;if(n.success)b("success"),window.sessionStorage&&sessionStorage.removeItem("paymentInfo"),t({amount:"",currency:"AUD",contributor:{name:"",phone:"",email:"",address:""},source:"website"});else throw Error(n.message||"Payment verification failed")}catch(e){console.error("Payment verification error:",e),b("error")}};return(0,a.useEffect)(()=>{{let e=new URLSearchParams(window.location.search),r=e.get("PayerID"),t=e.get("paymentId");r&&t&&Z(r,t)}},[]),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full mb-4",children:(0,s.jsx)(n.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Make a Generous Contribution"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Your kindness can make a real difference in someone's life"})]}),"success"===y&&(0,s.jsxs)("div",{className:"mb-8 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 text-green-600 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-green-800",children:"Thank you for your generous contribution!"}),(0,s.jsx)("p",{className:"text-green-700",children:"Your donation has been successfully processed."})]})]}),"error"===y&&(0,s.jsxs)("div",{className:"mb-8 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 text-red-600 mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-red-800",children:"Payment Failed"}),(0,s.jsx)("p",{className:"text-red-700",children:"Please try again or contact support if the issue persists."})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5 mr-2 text-purple-600"}),"Contribution Amount"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (AUD)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:"1",value:r.amount,onChange:e=>w(null,"amount",e.target.value),className:"w-full pl-8 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ".concat(j.amount?"border-red-300":"border-gray-300"),placeholder:"0.00"})]}),j.amount&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.amount})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 mr-2 text-purple-600"}),"Your Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:r.contributor.name,onChange:e=>w("contributor","name",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ".concat(j.name?"border-red-300":"border-gray-300"),placeholder:"John Doe"}),j.name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (prefer whatsapp)"}),(0,s.jsx)(h(),{country:"au",value:r.contributor.phone,onChange:e=>{t(r=>({...r,contributor:{...r.contributor,phone:e}})),j.phone&&N(e=>{let r={...e};return delete r.phone,r})},inputClass:" !w-full !h-12 !py-3 !pl-12 !pr-4 !border !rounded-lg !focus:ring-2 !focus:ring-purple-500 !focus:border-transparent ".concat(j.phone?"!border-red-300":"!border-gray-300"),containerClass:"!w-full",buttonClass:"!border-gray-300 !rounded-l-lg",dropdownClass:"!bg-white !shadow-lg !border !border-gray-300"}),j.phone&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.phone})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"email",value:r.contributor.email,onChange:e=>w("contributor","email",e.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ".concat(j.email?"border-red-300":"border-gray-300"),placeholder:"you@example.com"})]}),j.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.email})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",(0,s.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Z,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,s.jsx)("textarea",{value:r.contributor.address||"",onChange:e=>w("contributor","address",e.target.value),className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none ".concat(j.address?"border-red-300":"border-gray-300"),placeholder:"123 Main Street, City, State, Postal Code",rows:3})]}),j.address&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.address})]})]})]}),(0,s.jsx)("div",{className:"pt-6 border-t border-gray-200",children:(0,s.jsx)("button",{type:"button",onClick:k,disabled:x,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Payment..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"w-5 h-5 mr-2"}),"Proceed to PayPal"]})})})]}),(0,s.jsx)("div",{className:"text-center mt-8 text-gray-600",children:(0,s.jsx)("p",{className:"text-sm",children:"Your contribution makes a difference. Thank you for your generosity! \uD83D\uDE4F"})})]})})}}},function(e){e.O(0,[8826,9599,1229,3282,2971,2117,1744],function(){return e(e.s=7167)}),_N_E=e.O()}]);