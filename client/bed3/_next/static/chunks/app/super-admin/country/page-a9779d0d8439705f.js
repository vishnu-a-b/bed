(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2690],{8921:function(e,a,t){Promise.resolve().then(t.bind(t,6178))},6979:function(e,a,t){"use strict";t.d(a,{ZP:function(){return i}});var r=t(1434),s=t(1119),l=t(2265),n=t(9448);t(8242),t(4887),t(7935);var i=(0,l.forwardRef)(function(e,a){var t=(0,r.u)(e);return l.createElement(n.S,(0,s.Z)({ref:a},t))})},6178:function(e,a,t){"use strict";t.d(a,{default:function(){return I}});var r=t(7437),s=t(2265),l=t(8438),n=t(3618),i=t(386),o=t(4291),c=t(2381),d=t(4051),u=t(9376),m=t(7520);let h=[{accessorKey:"name",header:"Country Name"},{accessorKey:"currency",header:"Currency"},{accessorKey:"organization.name",header:"Organization"},{accessorKey:"head.name",header:"Head"},{accessorKey:"viewDetails",header:"Actions",cell:e=>{let a=e.row.original;return(0,r.jsxs)(o.Vq,{children:[(0,r.jsx)(o.hg,{className:"underline",children:(0,r.jsx)("button",{className:"px-4 p-1 text-white bg-sidebar-primary rounded-full",children:"View"})}),(0,r.jsx)(o.cZ,{className:"p-6",children:(0,r.jsx)(x,{data:a})})]})}}],x=e=>{var a,t;let{data:s}=e,l=(0,i.I0)(),n=(0,u.useRouter)();return(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[s.flag&&(0,r.jsx)("img",{className:"w-20 h-fit object-cover rounded-sm",crossOrigin:"anonymous",src:s.flag,alt:"Country Flag"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-lg font-bold",children:s.name}),(0,r.jsxs)("p",{children:["Currency: ",s.currency]}),(0,r.jsxs)("p",{children:["Organization: ",(null===(a=s.organization)||void 0===a?void 0:a.name)||"N/A"]}),(0,r.jsxs)("p",{children:["Head: ",(null===(t=s.head)||void 0===t?void 0:t.name)||"N/A"]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,r.jsx)(c.z,{className:"text-sm",onClick:e=>{e.preventDefault(),l((0,d.YR)(s._id)),l((0,d.Ij)(s.name)),n.push("/admin/country-details")},children:"View Details"}),(0,r.jsx)(c.z,{className:"text-sm",onClick:e=>{l((0,m.R5)("country")),l((0,m.h9)(s._id))},children:"Edit"}),(0,r.jsx)(c.z,{className:"text-sm",onClick:e=>{},children:"Manage Regions"})]})]})};function f(){var e;let a;let[t,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(0),[u,m]=(0,s.useState)(0),[x,f]=(0,s.useState)(10),[g,p]=(0,s.useState)(""),[v,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),N=(0,i.v9)(e=>e.update.refresh),w=(0,i.v9)(e=>e.country.id),z=(0,i.v9)(e=>e.organization.id),C=(0,s.useCallback)((e=e=>{j(e),m(0)},function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];clearTimeout(a),a=setTimeout(()=>{e(...r)},500)}),[]);async function S(){try{let e="";if(w){let e=await n.YD.get("/country/".concat(w)),a=[];return a[0]=e.data.data,d(1),a}"Active"===v?e="isActive__eq=true&":"InActive"===v&&(e="isActive__eq=false&");let a="";z&&(a="organization__eq=".concat(z,"&"));let t=(await n.YD.get("/country?limit=".concat(x,"&skip=").concat(u*x,"&").concat(a).concat(e).concat(y?"search=".concat(y,"&"):""))).data.data;return console.log("Fetched items:",t),d(t.total),t.items}catch(e){console.error("Error fetching data:",e)}}return(0,s.useEffect)(()=>{(async function(){o(await S())})()},[u,x,y,v,N,w,z]),(0,r.jsx)("div",{className:"flex flex-col items-center p-4",children:(0,r.jsxs)("div",{className:"container mx-auto py-10",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("input",{type:"text",value:g,onChange:e=>{let a=e.target.value;p(a),C(a)},placeholder:"Search countries...",className:"mb-4 p-2 border rounded"}),(0,r.jsxs)("select",{value:v,onChange:e=>{b(e.target.value),m(0)},className:"mb-4 p-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"all",children:"All"}),(0,r.jsx)("option",{value:"Active",children:"Active"}),(0,r.jsx)("option",{value:"InActive",children:"InActive"})]})]}),(0,r.jsx)(l.w,{url:"country",columns:h,data:t,totalRows:c,pageIndex:u,pageSize:x,onPageChange:m,onPageSizeChange:f,actions:{delete:!0,edit:!0}})]})})}var g=t(9501),p=t(3590),v=t(1229),b=t(279),y=t(5060),j=t(4978),N=t(9093),w=t(662),z=t(2786),C=t(1929),S=t(4395),_=t(7810);let k=v.z.object({name:v.z.string().min(1,{message:"Name is required"}).max(200),currency:v.z.string().min(1,{message:"Currency is required"}).max(200),flag:v.z.string().max(200).optional()});var O=e=>{let{countryId:a}=e,[t,l]=(0,s.useState)(!1),[n,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(),[h,x]=(0,s.useState)(),[f,v]=(0,s.useState)([]),[O,I]=(0,s.useState)(!1),E=(0,i.I0)(),{handleSubmit:F,register:P,setValue:Z,formState:{errors:A},setError:q}=(0,g.cI)({resolver:(0,p.F)(k)});(0,s.useEffect)(()=>{a&&(async()=>{l(!0);try{let e=(await (0,z.bp)(a,"country")).items;if(Z("name",e.name),Z("currency",e.currency),Z("flag",e.flag||""),e.organization){let a=(await (0,z.bp)(e.organization,"organization")).items;x({value:e.organization,label:a.name})}if(e.head){let a=(await (0,z.bp)(e.head,"user")).items;u({value:e.head,label:a.name})}l(!1)}catch(e){console.error("Error fetching country details:",e),l(!1)}})()},[a,Z]);let D=()=>{Z("name",""),Z("currency",""),Z("flag",""),u(void 0),x(void 0),v([]),E((0,m.Oe)())},B=async e=>{I(!0);try{var t;let r=null===(t=f[0])||void 0===t?void 0:t.file;if(a){let t={name:e.name,currency:e.currency,...r&&{flag:r},...h&&{organization:h.value},...d&&{head:d.value}},s=await (0,N.V)(t,"country",a,!0);s._id?(j.Z.success("Country updated successfully"),D()):(q(s.id,{message:s.value}),j.Z.error("An error occurred while submitting the form"))}else{let a={name:e.name,currency:e.currency,...r&&{flag:r},...h&&{organization:h.value},...d&&{head:d.value}},t=await (0,w.U)("country",a,!0);t._id?(j.Z.success("Country created successfully"),D()):(q(t.id,{message:t.value}),j.Z.error("An error occurred while submitting the form"))}}catch(e){console.error("Failed to submit form:",e),j.Z.error("An error occurred while submitting the form")}finally{I(!1)}};return t?(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-[70vh]",children:(0,r.jsx)("div",{className:"loader"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{onSubmit:F(B),className:"max-w-lg mx-auto p-4 bg-primary-foreground dark:bg-gray-900 shadow-lg rounded-lg grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"name",className:"required",children:"Country Name"}),(0,r.jsx)(b.I,{id:"name",...P("name"),placeholder:"Enter country name",className:"w-full border rounded p-2 ".concat(A.name?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),A.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:A.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"currency",className:"required",children:"Currency"}),(0,r.jsx)(b.I,{id:"currency",...P("currency"),placeholder:"Enter currency (e.g., USD, EUR)",className:"w-full border rounded p-2 ".concat(A.currency?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),A.currency&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:A.currency.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"organization",children:"Organization"}),(0,r.jsx)(_.Z,{cacheOptions:!0,loadOptions:S.Tz,defaultOptions:!0,value:h,onChange:e=>{e?x({value:e.id,label:e.label}):x(void 0)},classNamePrefix:"select",isClearable:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y._,{htmlFor:"head",children:"Head"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(_.Z,{cacheOptions:!0,loadOptions:S.p_,defaultOptions:!0,value:d,onChange:e=>{u(e)},classNamePrefix:"select",className:"flex-1",isClearable:!0}),(0,r.jsx)(c.z,{onClick:()=>{o(!n)},children:"+"})]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(c.z,{onClick:D,className:"bg-slate-400 hover:bg-slate-500",children:a?"Cancel":"Clear"}),(0,r.jsx)(c.z,{className:O?"cursor-not-allowed opacity-50":"",type:"submit",children:a?"Update":"Create"})]})]}),n&&(0,r.jsx)(C.Z,{onClose:()=>o(!1),role:"6771959e0c2a67fe52bcf45f",userSet:u})]})};function I(){let[e,a]=(0,s.useState)(!0),t=(0,i.I0)(),l=(0,i.v9)(e=>e.update.url),n=(0,i.v9)(e=>e.update.id);return(0,r.jsxs)("div",{className:"p-2 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold mb-2 text-bg2 flex justify-start",children:"Countries"}),"country"===l?"":(0,r.jsx)(c.z,{onClick:()=>{t((0,d.PG)()),t((0,m.Oe)()),a(!e)},className:"py-2 px-4 rounded-md hover:bg-bg2",children:e?"Add Country":"View Countries"})]}),"country"===l?n&&(0,r.jsx)(O,{countryId:n}):e?(0,r.jsx)(f,{}):(0,r.jsx)(O,{})]})}},1929:function(e,a,t){"use strict";var r=t(7437),s=t(2265),l=t(9501),n=t(1229),i=t(3590),o=t(279),c=t(2381),d=t(5060),u=t(6979),m=t(4978),h=t(662),x=t(3965);let f=n.z.object({name:n.z.string().min(1,{message:"Name is required"}).max(100),mobileNo:n.z.string().min(1,{message:"Mobile number is required"}).max(20),email:n.z.string().email({message:"Invalid email format"}).optional(),photo:n.z.string().optional(),dateOfBirth:n.z.string().optional(),gender:n.z.enum(["Male","Female","Other"],{message:"Gender is required"}).optional(),maritalStatus:n.z.enum(["Unknown","Bachelor","Married","Divorced","Widower"],{message:"Invalid marital status"}).optional(),password:n.z.string().min(6,{message:"Password must be at least 6 characters"}),role:n.z.string().optional()});a.Z=e=>{let{onClose:a,role:t,userSet:n}=e;console.log(t);let{handleSubmit:g,register:p,setValue:v,formState:{errors:b}}=(0,l.cI)({resolver:(0,i.F)(f)}),[y,j]=(0,s.useState)(null),[N,w]=(0,s.useState)({value:"Male",label:"Male"}),[z,C]=(0,s.useState)({value:"Unknown",label:"Unknown"}),S=async(e,r)=>{r.preventDefault(),console.log(e);try{let r={...e.name&&{name:e.name},...e.mobileNo&&{mobileNo:e.mobileNo},...e.email&&{email:e.email},...y&&{photo:y},...e.dateOfBirth&&{dateOfBirth:e.dateOfBirth},...N&&{gender:N.value},...z&&{maritalStatus:z.value},...e.mobileNo&&{password:e.mobileNo},role:t},s=await (0,h.U)("user",r,!0);console.log(s),s._id?(n({value:s._id,label:e.name}),m.Z.success("User created successfully"),a()):m.Z.error("Error creating user")}catch(e){console.error("Error submitting form:",e),m.Z.error("Error submitting form")}};return(0,r.jsx)("div",{className:"fixed inset-x-0 inset-y-[-16px] bg-black bg-opacity-50 flex justify-center items-center z-100 ",children:(0,r.jsxs)("div",{className:"p-2  bg-white sm:p-6 rounded-lg shadow-md ",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create User"}),(0,r.jsxs)("form",{onSubmit:g(S),className:"grid grid-cols-2 sm:gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"name",className:"required",children:"Name"}),(0,r.jsx)(o.I,{id:"name",...p("name"),placeholder:"Enter name",className:"w-full ".concat(b.name?"border-red-500":"")}),b.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"mobileNo",className:"required",children:"Mobile Number"}),(0,r.jsx)(o.I,{id:"mobileNo",...p("mobileNo"),placeholder:"Enter mobile number",className:"w-full ".concat(b.mobileNo?"border-red-500":"")}),b.mobileNo&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.mobileNo.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"email",children:"Email"}),(0,r.jsx)(o.I,{id:"email",...p("email"),placeholder:"Enter email",className:"w-full"}),b.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,r.jsx)(o.I,{type:"date",id:"dateOfBirth",...p("dateOfBirth",{valueAsDate:!1})}),b.dateOfBirth&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.dateOfBirth.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{children:"Gender"}),(0,r.jsx)(u.ZP,{id:"gender",name:"gender",value:N,options:x.P,classNamePrefix:"select",onChange:e=>{v("gender",e.value),w(e)}}),b.gender&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.gender.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"maritalStatus",children:"Marital Status"}),(0,r.jsx)(u.ZP,{id:"maritalStatus",name:"maritalStatus",options:[{value:"Unknown",label:"Unknown"},{value:"Bachelor",label:"Bachelor"},{value:"Married",label:"Married"},{value:"Divorced",label:"Divorced"},{value:"Widower",label:"Widower"}],classNamePrefix:"select",value:z,onChange:e=>{v("maritalStatus",e.value),C(e)}}),b.maritalStatus&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.maritalStatus.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"photo",children:"Photo"}),(0,r.jsx)(o.I,{id:"photo",type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&j(e.target.files[0])},className:"w-full border rounded p-2 bg-white dark:bg-gray-800 dark:text-white"}),b.photo&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.photo.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{htmlFor:"password",className:"required",children:"Password"}),(0,r.jsx)(o.I,{id:"password",type:"password",...p("password"),placeholder:"Enter password",className:"w-full ".concat(b.password?"border-red-500":"")}),b.password&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:b.password.message})]}),(0,r.jsxs)("div",{className:" col-span-2 flex justify-between space-x-2",children:[(0,r.jsx)(c.z,{onClick:a,className:"bg-gray-400 hover:bg-gray-500",children:"Cancel"}),(0,r.jsx)(c.z,{type:"submit",children:"Create"})]})]})]})})}},4291:function(e,a,t){"use strict";t.d(a,{Be:function(){return x},Vq:function(){return o},cZ:function(){return m},fK:function(){return h},hg:function(){return c}});var r=t(7437),s=t(2265),l=t(9027),n=t(653),i=t(3448);let o=l.fC,c=l.xz,d=l.h_;l.x8;let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=l.aV.displayName;let m=s.forwardRef((e,a)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(l.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[s,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.Pxu,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let h=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};h.displayName="DialogHeader",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})}).displayName=l.Dx.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});x.displayName=l.dk.displayName},3965:function(e,a,t){"use strict";t.d(a,{P:function(){return r}});let r=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}]},4051:function(e,a,t){"use strict";t.d(a,{Ij:function(){return n},PG:function(){return l},YR:function(){return s}});let r=(0,t(1455).oM)({name:"country",initialState:{id:null,name:null},reducers:{setCountryId:(e,a)=>{e.id=a.payload},clearCountryId:e=>{e.id=null},setCountryName:(e,a)=>{e.name=a.payload},clearCountryName:e=>{e.name=null},clearCountry:e=>{e.id=null,e.name=null}}}),{setCountryId:s,clearCountryId:l,setCountryName:n,clearCountryName:i,clearCountry:o}=r.actions;a.ZP=r.reducer},4395:function(e,a,t){"use strict";t.d(a,{$y:function(){return n},Pb:function(){return l},Tz:function(){return s},p_:function(){return i}});var r=t(2786);let s=async e=>(await (0,r.Ak)(e)).items.map(e=>({id:e._id,label:e.name})),l=async e=>(await (0,r.tE)(e)).items.map(e=>({id:e._id,label:e.name})),n=async e=>(await (0,r.GZ)(e)).items.map(e=>{var a;return{id:e._id,label:"".concat(e.bedNo," - ").concat(null==e?void 0:null===(a=e.organization)||void 0===a?void 0:a.name)}}),i=async e=>(await (0,r.uh)(e)).items.map(e=>({value:e._id,label:e.name}))}},function(e){e.O(0,[8310,9599,2234,7261,1425,2519,9027,3402,2329,8089,2971,2117,1744],function(){return e(e.s=8921)}),_N_E=e.O()}]);