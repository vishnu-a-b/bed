"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1316],{8438:function(e,t,a){a.d(t,{w:function(){return C}});var n=a(7437),r=a(2265),s=a(1594),o=a(4525),i=a(3448);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",a),...r})})});l.displayName="Table";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",a),...r})});d.displayName="TableHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",a),...r})});c.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});u.displayName="TableRow";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("th",{ref:t,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});f.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("td",{ref:t,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";var p=a(653),h=a(2381),g=a(5291);function x(e){let{table:t}=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,n.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[t.getFilteredRowModel().rows.length," row(s)"]}),(0,n.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Rows per page"}),(0,n.jsxs)(g.Ph,{value:"".concat(t.getState().pagination.pageSize),onValueChange:e=>{t.setPageSize(Number(e))},children:[(0,n.jsx)(g.i4,{className:"h-8 w-[70px]",children:(0,n.jsx)(g.ki,{placeholder:t.getState().pagination.pageSize})}),(0,n.jsx)(g.Bw,{side:"top",children:[10,20,30,40,50].map(e=>(0,n.jsx)(g.Ql,{value:"".concat(e),children:e},e))})]})]}),(0,n.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(h.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[(0,n.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,n.jsx)(p.kRt,{className:"h-4 w-4"})]}),(0,n.jsxs)(h.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[(0,n.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,n.jsx)(p.wyc,{className:"h-4 w-4"})]}),(0,n.jsxs)(h.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[(0,n.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,n.jsx)(p.XCv,{className:"h-4 w-4"})]}),(0,n.jsxs)(h.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[(0,n.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,n.jsx)(p.yr4,{className:"h-4 w-4"})]})]})]})]})}var y=a(6128),w=a(8930),b=a(386),v=a(7520),N=a(3618),j=a(9376);function C(e){var t,a;let{url:i,columns:p,data:h,totalRows:g,pageIndex:C,pageSize:_,onPageChange:k,onPageSizeChange:S,actions:I}=e,[R,z]=(0,r.useState)([]),[A,D]=(0,r.useState)([]),[P,T]=(0,r.useState)({}),[Y,B]=(0,r.useState)({pageIndex:C,pageSize:_}),L=(0,b.I0)();(0,j.useRouter)();let V=(0,s.b7)({data:h,columns:[{id:"index",header:"No",cell:e=>{let{row:t}=e;return t.index+1+Y.pageIndex*Y.pageSize},enableSorting:!1},...p,...I.edit||I.delete?[{id:"actions",header:"Actions",cell:e=>{let{row:t}=e;return(0,n.jsxs)("div",{className:"flex space-x-2",children:[I.edit&&(0,n.jsx)("button",{className:"text-blue-500",onClick:()=>{Z(t.original._id)},children:(0,n.jsx)(y.Z,{})}),I.delete&&(0,n.jsx)("button",{onClick:()=>E(t.original),className:"text-red-500",children:(0,n.jsx)(w.Z,{})})]})},enableSorting:!1}]:[]],pageCount:Math.ceil(g/Y.pageSize),state:{sorting:R,columnFilters:A,columnVisibility:P,pagination:Y},getCoreRowModel:(0,o.sC)(),getPaginationRowModel:(0,o.G_)(),getSortedRowModel:(0,o.tj)(),getFilteredRowModel:(0,o.vL)(),onSortingChange:z,onPaginationChange:B,onColumnFiltersChange:D,onColumnVisibilityChange:T,manualPagination:!0}),Z=e=>{L((0,v.R5)(i)),L((0,v.h9)(e))},E=async e=>{try{if(window.confirm("Are you sure you want to delete this data?")){let t=await N.YD.delete("/".concat(i,"/").concat(e._id));"staff"===i&&await N.YD.delete("/user/".concat(e.user._id)),console.log(t),L((0,v.tV)())}}catch(e){console.error("Error deleting data:",e),L((0,v.tV)())}};return(0,r.useEffect)(()=>{k(Y.pageIndex),S(Y.pageSize)},[Y.pageIndex,Y.pageSize,k,S]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(l,{className:"w-full",children:[(0,n.jsx)(d,{children:V.getHeaderGroups().map(e=>(0,n.jsx)(u,{children:e.headers.map(e=>(0,n.jsx)(f,{children:e.isPlaceholder?null:(0,s.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)(c,{children:(null===(a=V.getRowModel())||void 0===a?void 0:null===(t=a.rows)||void 0===t?void 0:t.length)?V.getRowModel().rows.map(e=>(0,n.jsx)(u,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,n.jsx)(m,{children:(0,s.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,n.jsx)(u,{children:(0,n.jsx)(m,{colSpan:p.length+2,className:"h-24 text-center",children:"No results."})})})]})}),"supporter"!=i&&(0,n.jsx)(x,{table:V})]})}},2381:function(e,t,a){a.d(t,{z:function(){return d}});var n=a(7437),r=a(2265),s=a(7053),o=a(535),i=a(3448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:o,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:r,size:o,className:a})),ref:t,...c})});d.displayName="Button"},279:function(e,t,a){a.d(t,{I:function(){return o}});var n=a(7437),r=a(2265),s=a(3448);let o=r.forwardRef((e,t)=>{let{className:a,type:r,...o}=e;return(0,n.jsx)("input",{type:r,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input  px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...o})});o.displayName="Input"},5060:function(e,t,a){a.d(t,{_:function(){return d}});var n=a(7437),r=a(2265),s=a(6394),o=a(535),i=a(3448);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,i.cn)(l(),a),...r})});d.displayName=s.f.displayName},5291:function(e,t,a){a.d(t,{Bw:function(){return m},Ph:function(){return l},Ql:function(){return p},i4:function(){return c},ki:function(){return d}});var n=a(7437),r=a(2265),s=a(653),o=a(3402),i=a(3448);let l=o.fC;o.ZA;let d=o.B4,c=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,n.jsxs)(o.xz,{ref:t,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,n.jsx)(o.JO,{asChild:!0,children:(0,n.jsx)(s.jnn,{className:"h-4 w-4 opacity-50"})})]})});c.displayName=o.xz.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(o.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,n.jsx)(s.g8U,{})})});u.displayName=o.u_.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(o.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,n.jsx)(s.v4q,{})})});f.displayName=o.$G.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,position:s="popper",...l}=e;return(0,n.jsx)(o.h_,{children:(0,n.jsxs)(o.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...l,children:[(0,n.jsx)(u,{}),(0,n.jsx)(o.l_,{className:(0,i.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,n.jsx)(f,{})]})})});m.displayName=o.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(o.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=o.__.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,n.jsxs)(o.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,n.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(s.nQG,{className:"h-4 w-4"})})}),(0,n.jsx)(o.eT,{children:r})]})});p.displayName=o.ck.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(o.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px ",a),...r})}).displayName=o.Z0.displayName},7520:function(e,t,a){a.d(t,{Oe:function(){return o},R5:function(){return s},h9:function(){return r},tV:function(){return i}});let n=(0,a(1455).oM)({name:"update",initialState:{id:null,url:null,refresh:!1},reducers:{setUpdateId:(e,t)=>{e.id=t.payload},setUpdateUrl:(e,t)=>{e.url=t.payload},clearUpdate:e=>{e.id=null,e.url=null},refreshTable:e=>{e.refresh=!e.refresh}}}),{setUpdateId:r,setUpdateUrl:s,clearUpdate:o,refreshTable:i}=n.actions;t.ZP=n.reducer},3448:function(e,t,a){a.d(t,{cn:function(){return s}});var n=a(1994),r=a(3335);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}},3618:function(e,t,a){a.d(t,{YD:function(){return c},kS:function(){return d},pH:function(){return s}});var n=a(3464);let r="https://api.donatebed.shanthibhavan.in/v1",s=async(e,t)=>{let a=await n.Z.post("".concat(r,"/auth/jwt/create"),{username:e,password:t});return i(a.data.data.accessToken,a.data.data.refreshToken),a.data.data},o=async e=>(await n.Z.post("".concat(r,"/auth/jwt/verify"),{refreshToken:e})).data.data,i=(e,t)=>{sessionStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t)},l=()=>sessionStorage.getItem("access_token"),d=()=>{sessionStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.reload()},c=n.Z.create({baseURL:r,headers:{"Content-Type":"multipart/form-data"}});c.interceptors.request.use(e=>{let t=l();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),c.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry){a._retry=!0;let e=localStorage.getItem("refresh_token");if(e)try{let{accessToken:t}=await o(e);return i(t,e),a.headers.Authorization="Bearer "+t,c(a)}catch(e){throw d(),window.location.reload(),e}else d(),window.location.reload()}throw e})},662:function(e,t,a){a.d(t,{U:function(){return r}});var n=a(3618);let r=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=await n.YD.post("".concat("https://api.donatebed.shanthibhavan.in/v1","/").concat(e,"/"),t,{headers:{"Content-Type":a?"multipart/form-data":"application/json"}});return console.log(r),r.data.data}catch(t){console.error("Error creating data:",t);let e=t.response.data;if("VALIDATION_FAILED"!==e.message)return{msg:"Something went wrong"};if(e.error)return{idNumber:"Identification Details Should be unique"};if(e.errorsList)return{id:e.errorsList[0].path,value:e.errorsList[0].msg}}}},2786:function(e,t,a){a.d(t,{Ak:function(){return i},GZ:function(){return l},WX:function(){return c},bp:function(){return o},dQ:function(){return u},fp:function(){return m},rQ:function(){return s},tE:function(){return d},uh:function(){return f}});var n=a(3618);let r="https://api.donatebed.shanthibhavan.in/v1",s=async e=>{try{return{items:(await n.YD.get("/".concat(e))).data.data}}catch(e){return console.error("Error fetching data:",e),{items:[]}}},o=async(e,t)=>{try{return{items:(await n.YD.get("/".concat(t,"/").concat(e))).data.data}}catch(e){return console.error("Error fetching data:",e),{items:[]}}},i=async e=>(await n.YD.get("".concat(r,"/organization?limit=Infinity&sortBy=updatedAt").concat(e?"&search=".concat(e):""))).data.data,l=async e=>{let t=Number(e);return console.log("searchTerm",e,t,typeof t,typeof e),(await n.YD.get("".concat(r,"/bed?limit=Infinity&sortBy=updatedAt").concat(e?"&search=".concat(t):""))).data.data},d=async e=>(await n.YD.get("".concat(r,"/country?limit=Infinity&sortBy=updatedAt").concat(e?"&search=".concat(e):""))).data.data,c=async e=>(await n.YD.get("".concat(r,"/supporter/supporter?limit=Infinity&sortBy=updatedAt").concat(e?"&search=".concat(e):""))).data.data,u=async(e,t)=>(await n.YD.get("".concat(r,"/staff?").concat(t?"organization__eq=".concat(t,"&"):"","limit=Infinity&sortBy=updatedAt").concat(e?"&search=".concat(e):""))).data.data,f=async e=>{let t=await n.YD.get("".concat(r,"/user?limit=Infinity&sortBy=updatedAt").concat(e?"&search=".concat(e):""));return console.log(t),t.data.data},m=async()=>(await n.YD.get("".concat(r,"/role"))).data.data},4395:function(e,t,a){a.d(t,{$y:function(){return o},Pb:function(){return s},Tz:function(){return r},p_:function(){return i}});var n=a(2786);let r=async e=>(await (0,n.Ak)(e)).items.map(e=>({id:e._id,label:e.name})),s=async e=>(await (0,n.tE)(e)).items.map(e=>({id:e._id,label:e.name})),o=async e=>(await (0,n.GZ)(e)).items.map(e=>{var t;return{id:e._id,label:"".concat(e.bedNo," - ").concat(null==e?void 0:null===(t=e.organization)||void 0===t?void 0:t.name)}}),i=async e=>(await (0,n.uh)(e)).items.map(e=>({value:e._id,label:e.name}))},9093:function(e,t,a){a.d(t,{V:function(){return r}});var n=a(3618);let r=async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{return console.log(typeof e),(await n.YD.put("".concat("https://api.donatebed.shanthibhavan.in/v1","/").concat(t,"/").concat(a),e,{headers:{"Content-Type":r?"multipart/form-data":"application/json"}})).data.data}catch(t){console.log(t),console.log(t.response.data);let e=t.response.data;if("VALIDATION_FAILED"!==e.message)return{msg:"Something went wrong"};if(e.error)return{idNumber:"Identification Details Should be unique"};if(e.errorsList)return{id:e.errorsList[0].path,value:e.errorsList[0].msg}}}},4978:function(e,t,a){var n=a(7261);t.Z={success:e=>{n.Am.success(e,{autoClose:2e3})},error:e=>{n.Am.error(e,{autoClose:2e3})},info:e=>{n.Am.info(e,{autoClose:2e3})},warning:e=>{n.Am.warning(e,{autoClose:2e3})}}}}]);