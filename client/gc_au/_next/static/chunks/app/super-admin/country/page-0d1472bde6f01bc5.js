(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2690],{8921:function(e,a,r){Promise.resolve().then(r.bind(r,6178))},6979:function(e,a,r){"use strict";r.d(a,{ZP:function(){return i}});var t=r(1434),s=r(1119),l=r(2265),n=r(9448);r(8242),r(4887),r(7935);var i=(0,l.forwardRef)(function(e,a){var r=(0,t.u)(e);return l.createElement(n.S,(0,s.Z)({ref:a},r))})},6178:function(e,a,r){"use strict";r.d(a,{default:function(){return O}});var t=r(7437),s=r(2265),l=r(8438),n=r(3618),i=r(386),o=r(4291),d=r(2381),c=r(4051),m=r(9376),u=r(7520);let h=[{accessorKey:"name",header:"Country Name"},{accessorKey:"currency",header:"Currency"},{accessorKey:"organization.name",header:"Organization"},{accessorKey:"head.name",header:"Head"},{accessorKey:"viewDetails",header:"Actions",cell:e=>{let a=e.row.original;return(0,t.jsxs)(o.Vq,{children:[(0,t.jsx)(o.hg,{className:"underline",children:(0,t.jsx)("button",{className:"px-4 p-1 text-white bg-sidebar-primary rounded-full",children:"View"})}),(0,t.jsx)(o.cZ,{className:"p-6",children:(0,t.jsx)(x,{data:a})})]})}}],x=e=>{var a,r;let{data:s}=e,l=(0,i.I0)(),n=(0,m.useRouter)();return(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[s.flag&&(0,t.jsx)("img",{className:"w-20 h-fit object-cover rounded-sm",crossOrigin:"anonymous",src:s.flag,alt:"Country Flag"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-bold",children:s.name}),(0,t.jsxs)("p",{children:["Currency: ",s.currency]}),(0,t.jsxs)("p",{children:["Organization: ",(null===(a=s.organization)||void 0===a?void 0:a.name)||"N/A"]}),(0,t.jsxs)("p",{children:["Head: ",(null===(r=s.head)||void 0===r?void 0:r.name)||"N/A"]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsx)(d.z,{className:"text-sm",onClick:e=>{e.preventDefault(),l((0,c.YR)(s._id)),l((0,c.Ij)(s.name)),n.push("/admin/country-details")},children:"View Details"}),(0,t.jsx)(d.z,{className:"text-sm",onClick:e=>{l((0,u.R5)("country")),l((0,u.h9)(s._id))},children:"Edit"}),(0,t.jsx)(d.z,{className:"text-sm",onClick:e=>{},children:"Manage Regions"})]})]})};function g(){var e;let a;let[r,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(0),[m,u]=(0,s.useState)(0),[x,g]=(0,s.useState)(10),[f,p]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(""),y=(0,i.v9)(e=>e.update.refresh),w=(0,i.v9)(e=>e.country.id),z=(0,i.v9)(e=>e.organization.id),C=(0,s.useCallback)((e=e=>{v(e),u(0)},function(){for(var r=arguments.length,t=Array(r),s=0;s<r;s++)t[s]=arguments[s];clearTimeout(a),a=setTimeout(()=>{e(...t)},500)}),[]);async function k(){try{let e="";if(w){let e=await n.YD.get("/country/".concat(w)),a=[];return a[0]=e.data.data,c(1),a}"Active"===b?e="isActive__eq=true&":"InActive"===b&&(e="isActive__eq=false&");let a="";z&&(a="organization__eq=".concat(z,"&"));let r=(await n.YD.get("/country?limit=".concat(x,"&skip=").concat(m*x,"&").concat(a).concat(e).concat(N?"search=".concat(N,"&"):""))).data.data;return console.log("Fetched items:",r),c(r.total),r.items}catch(e){console.error("Error fetching data:",e)}}return(0,s.useEffect)(()=>{(async function(){o(await k())})()},[m,x,N,b,y,w,z]),(0,t.jsx)("div",{className:"flex flex-col items-center p-4",children:(0,t.jsxs)("div",{className:"container mx-auto py-10",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>{let a=e.target.value;p(a),C(a)},placeholder:"Search countries...",className:"mb-4 p-2 border rounded"}),(0,t.jsxs)("select",{value:b,onChange:e=>{j(e.target.value),u(0)},className:"mb-4 p-2 border border-gray-300 rounded",children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"Active",children:"Active"}),(0,t.jsx)("option",{value:"InActive",children:"InActive"})]})]}),(0,t.jsx)(l.w,{url:"country",columns:h,data:r,totalRows:d,pageIndex:m,pageSize:x,onPageChange:u,onPageSizeChange:g,actions:{delete:!0,edit:!0}})]})})}var f=r(9501),p=r(3590),b=r(1229),j=r(279),N=r(5060),v=r(4978),y=r(9093),w=r(662),z=r(2786),C=r(1929),k=r(4395),S=r(7810);let _=b.z.object({name:b.z.string().min(1,{message:"Name is required"}).max(200),currency:b.z.string().min(1,{message:"Currency is required"}).max(200),flag:b.z.string().max(200).optional(),address:b.z.string().max(500).optional(),phoneNumber:b.z.string().max(50).optional(),website:b.z.string().max(200).optional()});var I=e=>{let{countryId:a}=e,[r,l]=(0,s.useState)(!1),[n,o]=(0,s.useState)(!1),[c,m]=(0,s.useState)(),[h,x]=(0,s.useState)(),[g,b]=(0,s.useState)([]),[I,O]=(0,s.useState)(!1),F=(0,i.I0)(),{handleSubmit:E,register:P,setValue:A,formState:{errors:Z},setError:D}=(0,f.cI)({resolver:(0,p.F)(_)});(0,s.useEffect)(()=>{a&&(async()=>{l(!0);try{let e=(await (0,z.bp)(a,"country")).items;if(A("name",e.name),A("currency",e.currency),A("flag",e.flag||""),A("address",e.address||""),A("phoneNumber",e.phoneNumber||""),A("website",e.website||""),e.organization){let a=(await (0,z.bp)(e.organization,"organization")).items;x({value:e.organization,label:a.name})}if(e.head){let a=(await (0,z.bp)(e.head,"user")).items;m({value:e.head,label:a.name})}l(!1)}catch(e){console.error("Error fetching country details:",e),l(!1)}})()},[a,A]);let q=()=>{A("name",""),A("currency",""),A("flag",""),A("address",""),A("phoneNumber",""),A("website",""),m(void 0),x(void 0),b([]),F((0,u.Oe)())},B=async e=>{O(!0);try{var r;let t=null===(r=g[0])||void 0===r?void 0:r.file;if(a){let r={name:e.name,currency:e.currency,...t&&{flag:t},...h&&{organization:h.value},...c&&{head:c.value},...e.address&&{address:e.address},...e.phoneNumber&&{phoneNumber:e.phoneNumber},...e.website&&{website:e.website}},s=await (0,y.V)(r,"country",a,!0);s._id?(v.Z.success("Country updated successfully"),q()):(D(s.id,{message:s.value}),v.Z.error("An error occurred while submitting the form"))}else{let a={name:e.name,currency:e.currency,...t&&{flag:t},...h&&{organization:h.value},...c&&{head:c.value},...e.address&&{address:e.address},...e.phoneNumber&&{phoneNumber:e.phoneNumber},...e.website&&{website:e.website}},r=await (0,w.U)("country",a,!0);r._id?(v.Z.success("Country created successfully"),q()):(D(r.id,{message:r.value}),v.Z.error("An error occurred while submitting the form"))}}catch(e){console.error("Failed to submit form:",e),v.Z.error("An error occurred while submitting the form")}finally{O(!1)}};return r?(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-[70vh]",children:(0,t.jsx)("div",{className:"loader"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("form",{onSubmit:E(B),className:"max-w-lg mx-auto p-4 bg-primary-foreground dark:bg-gray-900 shadow-lg rounded-lg grid grid-cols-1 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(N._,{htmlFor:"name",className:"required",children:"Country Name"}),(0,t.jsx)(j.I,{id:"name",...P("name"),placeholder:"Enter country name",className:"w-full border rounded p-2 ".concat(Z.name?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),Z.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:Z.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N._,{htmlFor:"currency",className:"required",children:"Currency"}),(0,t.jsx)(j.I,{id:"currency",...P("currency"),placeholder:"Enter currency (e.g., USD, EUR)",className:"w-full border rounded p-2 ".concat(Z.currency?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),Z.currency&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:Z.currency.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N._,{htmlFor:"organization",children:"Organization"}),(0,t.jsx)(S.Z,{cacheOptions:!0,loadOptions:k.Tz,defaultOptions:!0,value:h,onChange:e=>{e?x({value:e.id,label:e.label}):x(void 0)},classNamePrefix:"select",isClearable:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h6",{children:"Office Details"}),(0,t.jsx)(N._,{htmlFor:"address",children:"Address"}),(0,t.jsx)(j.I,{id:"address",...P("address"),placeholder:"Enter address",className:"w-full border rounded p-2 ".concat(Z.address?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),Z.address&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:Z.address.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N._,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,t.jsx)(j.I,{id:"phoneNumber",...P("phoneNumber"),placeholder:"Enter phone number",className:"w-full border rounded p-2 ".concat(Z.phoneNumber?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),Z.phoneNumber&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:Z.phoneNumber.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N._,{htmlFor:"website",children:"Website"}),(0,t.jsx)(j.I,{id:"website",...P("website"),placeholder:"https://example.com",className:"w-full border rounded p-2 ".concat(Z.website?"border-red-500":"border-gray-300"," bg-white dark:bg-gray-800 dark:text-white")}),Z.website&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:Z.website.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N._,{htmlFor:"head",children:"Head"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(S.Z,{cacheOptions:!0,loadOptions:k.p_,defaultOptions:!0,value:c,onChange:e=>{m(e)},classNamePrefix:"select",className:"flex-1",isClearable:!0}),(0,t.jsx)(d.z,{onClick:()=>{o(!n)},children:"+"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(d.z,{onClick:q,className:"bg-slate-400 hover:bg-slate-500",children:a?"Cancel":"Clear"}),(0,t.jsx)(d.z,{className:I?"cursor-not-allowed opacity-50":"",type:"submit",children:a?"Update":"Create"})]})]}),n&&(0,t.jsx)(C.Z,{onClose:()=>o(!1),role:"6771959e0c2a67fe52bcf45f",userSet:m})]})};function O(){let[e,a]=(0,s.useState)(!0),r=(0,i.I0)(),l=(0,i.v9)(e=>e.update.url),n=(0,i.v9)(e=>e.update.id);return(0,t.jsxs)("div",{className:"p-2 sm:p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold mb-2 text-bg2 flex justify-start",children:"Countries"}),"country"===l?"":(0,t.jsx)(d.z,{onClick:()=>{r((0,c.PG)()),r((0,u.Oe)()),a(!e)},className:"py-2 px-4 rounded-md hover:bg-bg2",children:e?"Add Country":"View Countries"})]}),"country"===l?n&&(0,t.jsx)(I,{countryId:n}):e?(0,t.jsx)(g,{}):(0,t.jsx)(I,{})]})}},1929:function(e,a,r){"use strict";var t=r(7437),s=r(2265),l=r(9501),n=r(1229),i=r(3590),o=r(279),d=r(2381),c=r(5060),m=r(6979),u=r(4978),h=r(662),x=r(3965);let g=n.z.object({name:n.z.string().min(1,{message:"Name is required"}).max(100),mobileNo:n.z.string().min(1,{message:"Mobile number is required"}).max(20),email:n.z.string().email({message:"Invalid email format"}).optional(),photo:n.z.string().optional(),dateOfBirth:n.z.string().optional(),gender:n.z.enum(["Male","Female","Other"],{message:"Gender is required"}).optional(),maritalStatus:n.z.enum(["Unknown","Bachelor","Married","Divorced","Widower"],{message:"Invalid marital status"}).optional(),password:n.z.string().min(6,{message:"Password must be at least 6 characters"}),role:n.z.string().optional()});a.Z=e=>{let{onClose:a,role:r,userSet:n}=e;console.log(r);let{handleSubmit:f,register:p,setValue:b,formState:{errors:j}}=(0,l.cI)({resolver:(0,i.F)(g)}),[N,v]=(0,s.useState)(null),[y,w]=(0,s.useState)({value:"Male",label:"Male"}),[z,C]=(0,s.useState)({value:"Unknown",label:"Unknown"}),k=async(e,t)=>{t.preventDefault(),console.log(e);try{let t={...e.name&&{name:e.name},...e.mobileNo&&{mobileNo:e.mobileNo},...e.email&&{email:e.email},...N&&{photo:N},...e.dateOfBirth&&{dateOfBirth:e.dateOfBirth},...y&&{gender:y.value},...z&&{maritalStatus:z.value},...e.mobileNo&&{password:e.mobileNo},role:r},s=await (0,h.U)("user",t,!0);console.log(s),s._id?(n({value:s._id,label:e.name}),u.Z.success("User created successfully"),a()):u.Z.error("Error creating user")}catch(e){console.error("Error submitting form:",e),u.Z.error("Error submitting form")}};return(0,t.jsx)("div",{className:"fixed inset-x-0 inset-y-[-16px] bg-black bg-opacity-50 flex justify-center items-center z-100 ",children:(0,t.jsxs)("div",{className:"p-2  bg-white sm:p-6 rounded-lg shadow-md ",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create User"}),(0,t.jsxs)("form",{onSubmit:f(k),className:"grid grid-cols-2 sm:gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"name",className:"required",children:"Name"}),(0,t.jsx)(o.I,{id:"name",...p("name"),placeholder:"Enter name",className:"w-full ".concat(j.name?"border-red-500":"")}),j.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"mobileNo",className:"required",children:"Mobile Number"}),(0,t.jsx)(o.I,{id:"mobileNo",...p("mobileNo"),placeholder:"Enter mobile number",className:"w-full ".concat(j.mobileNo?"border-red-500":"")}),j.mobileNo&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.mobileNo.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,t.jsx)(o.I,{id:"email",...p("email"),placeholder:"Enter email",className:"w-full"}),j.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,t.jsx)(o.I,{type:"date",id:"dateOfBirth",...p("dateOfBirth",{valueAsDate:!1})}),j.dateOfBirth&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.dateOfBirth.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{children:"Gender"}),(0,t.jsx)(m.ZP,{id:"gender",name:"gender",value:y,options:x.P,classNamePrefix:"select",onChange:e=>{b("gender",e.value),w(e)}}),j.gender&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.gender.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"maritalStatus",children:"Marital Status"}),(0,t.jsx)(m.ZP,{id:"maritalStatus",name:"maritalStatus",options:[{value:"Unknown",label:"Unknown"},{value:"Bachelor",label:"Bachelor"},{value:"Married",label:"Married"},{value:"Divorced",label:"Divorced"},{value:"Widower",label:"Widower"}],classNamePrefix:"select",value:z,onChange:e=>{b("maritalStatus",e.value),C(e)}}),j.maritalStatus&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.maritalStatus.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"photo",children:"Photo"}),(0,t.jsx)(o.I,{id:"photo",type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&v(e.target.files[0])},className:"w-full border rounded p-2 bg-white dark:bg-gray-800 dark:text-white"}),j.photo&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.photo.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c._,{htmlFor:"password",className:"required",children:"Password"}),(0,t.jsx)(o.I,{id:"password",type:"password",...p("password"),placeholder:"Enter password",className:"w-full ".concat(j.password?"border-red-500":"")}),j.password&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:j.password.message})]}),(0,t.jsxs)("div",{className:" col-span-2 flex justify-between space-x-2",children:[(0,t.jsx)(d.z,{onClick:a,className:"bg-gray-400 hover:bg-gray-500",children:"Cancel"}),(0,t.jsx)(d.z,{type:"submit",children:"Create"})]})]})]})})}},4291:function(e,a,r){"use strict";r.d(a,{Be:function(){return x},Vq:function(){return o},cZ:function(){return u},fK:function(){return h},hg:function(){return d}});var t=r(7437),s=r(2265),l=r(9027),n=r(653),i=r(3448);let o=l.fC,d=l.xz,c=l.h_;l.x8;let m=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});m.displayName=l.aV.displayName;let u=s.forwardRef((e,a)=>{let{className:r,children:s,...o}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(l.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[s,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.Pxu,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.VY.displayName;let h=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...r})};h.displayName="DialogHeader",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})}).displayName=l.Dx.displayName;let x=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});x.displayName=l.dk.displayName},3965:function(e,a,r){"use strict";r.d(a,{P:function(){return t}});let t=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}]},4051:function(e,a,r){"use strict";r.d(a,{Ij:function(){return n},PG:function(){return l},YR:function(){return s}});let t=(0,r(1455).oM)({name:"country",initialState:{id:null,name:null},reducers:{setCountryId:(e,a)=>{e.id=a.payload},clearCountryId:e=>{e.id=null},setCountryName:(e,a)=>{e.name=a.payload},clearCountryName:e=>{e.name=null},clearCountry:e=>{e.id=null,e.name=null}}}),{setCountryId:s,clearCountryId:l,setCountryName:n,clearCountryName:i,clearCountry:o}=t.actions;a.ZP=t.reducer}},function(e){e.O(0,[8310,9599,2234,1229,7261,3535,2519,9027,3402,2329,1316,2971,2117,1744],function(){return e(e.s=8921)}),_N_E=e.O()}]);